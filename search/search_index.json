{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Pylight","text":"<p>A next-generation Python API framework that automatically generates REST endpoints, GraphQL schemas, WebSocket hooks, and CLI commands from data models.</p>"},{"location":"#what-is-pylight","title":"What is Pylight?","text":"<p>Pylight is a powerful Python framework that eliminates boilerplate code by automatically generating complete API endpoints from your SQLAlchemy models. Simply define your data models, and Pylight handles the rest - REST endpoints, GraphQL queries and mutations, WebSocket connections, and more.</p>"},{"location":"#key-benefits","title":"Key Benefits","text":"<ul> <li>Zero Boilerplate: Define models, get full CRUD APIs automatically</li> <li>Multiple Protocols: REST, GraphQL, and WebSocket support out of the box</li> <li>Production Ready: Built on Starlette and Uvicorn for high-performance async operations</li> <li>Flexible Configuration: YAML or class-based configuration</li> <li>Database Agnostic: Works with PostgreSQL, MySQL, SQLite, and more</li> <li>Extensible: Plugin system for custom functionality</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Get started with Pylight in minutes:</p> <pre><code># Install Pylight\npip install pylight\n\n# Create a new project\npylight init my-api\ncd my-api\n\n# Run the server\npython main.py\n</code></pre>"},{"location":"#quick-example","title":"Quick Example","text":"<p>Create a complete API with just a few lines of code:</p> <pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre> <p>This automatically creates: - <code>GET /api/products</code> - List all products - <code>GET /api/products/{id}</code> - Get a specific product - <code>POST /api/products</code> - Create a new product - <code>PUT /api/products/{id}</code> - Update a product - <code>DELETE /api/products/{id}</code> - Delete a product - GraphQL endpoint at <code>/graphql</code> - WebSocket endpoint at <code>/ws/products</code> - API documentation at <code>/docs</code></p> <p>View source: <code>docs/examples/basic_usage.py</code></p>"},{"location":"#features","title":"Features","text":""},{"location":"#automatic-endpoint-generation","title":"Automatic Endpoint Generation","text":"<p>Define models using class-based inheritance with SQLAlchemy, and get REST, GraphQL, WebSocket, and CLI endpoints automatically.</p>"},{"location":"#async-io","title":"Async I/O","text":"<p>Built on Starlette and Uvicorn for high-performance async operations that scale.</p>"},{"location":"#authentication","title":"Authentication","text":"<p>Role-based JWT and OAuth2 authentication out of the box with easy customization.</p>"},{"location":"#caching","title":"Caching","text":"<p>Redis integration for efficient caching of API responses.</p>"},{"location":"#built-in-features","title":"Built-in Features","text":"<p>Pagination, filtering, and sorting for list endpoints - no extra code needed.</p>"},{"location":"#auto-documentation","title":"Auto Documentation","text":"<p>Swagger/OpenAPI and GraphiQL interfaces generated automatically.</p>"},{"location":"#flexible-configuration","title":"Flexible Configuration","text":"<p>YAML or class-based configuration at app and endpoint levels.</p>"},{"location":"#database-reflection","title":"Database Reflection","text":"<p>Automatically generate models from existing databases.</p>"},{"location":"#extensible","title":"Extensible","text":"<p>Plugin system and inheritance-based customization for advanced use cases.</p>"},{"location":"#get-started","title":"Get Started","text":"<p>Ready to build your API? Start with our Getting Started Guide.</p>"},{"location":"#documentation-sections","title":"Documentation Sections","text":"<ul> <li>Getting Started - Installation, quick start, and architecture overview</li> <li>Building APIs - Complete guide to all framework features</li> <li>Customization - Advanced configuration and customization</li> <li>API Reference - Complete API documentation</li> <li>Use Cases - Real-world examples and patterns</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.11+</li> <li>SQLAlchemy-compatible database (PostgreSQL, MySQL, SQLite)</li> </ul>"},{"location":"#license","title":"License","text":"<p>MIT</p>"},{"location":"api/","title":"Pylight API Reference","text":""},{"location":"api/#core-classes","title":"Core Classes","text":""},{"location":"api/#lightapi","title":"LightApi","text":"<p>Main application class for Pylight framework.</p> <p>Methods: - <code>__init__(database_url, swagger_title, swagger_version, swagger_description, config_path, config_class)</code>: Initialize application - <code>register(model)</code>: Register a model for automatic endpoint generation - <code>add_middleware(middleware)</code>: Add middleware to the application - <code>register_plugin(plugin_class)</code>: Register a plugin - <code>run(host, port, debug)</code>: Run the application server</p>"},{"location":"api/#restendpoint","title":"RestEndpoint","text":"<p>Base class for all models/endpoints.</p> <p>Attributes: - Inherits SQLAlchemy declarative base - Table name derived from class name (lowercase)</p> <p>Configuration: - Nested <code>Configuration</code> class for endpoint-level settings</p>"},{"location":"api/#authentication","title":"Authentication","text":""},{"location":"api/#jwtauthentication","title":"JWTAuthentication","text":"<p>Base class for JWT authentication. Extend to customize.</p>"},{"location":"api/#oauth2authentication","title":"OAuth2Authentication","text":"<p>Base class for OAuth2 authentication. Extend to customize.</p>"},{"location":"api/#caching","title":"Caching","text":""},{"location":"api/#rediscache","title":"RedisCache","text":"<p>Base class for Redis caching. Extend to customize.</p>"},{"location":"api/#pagination","title":"Pagination","text":""},{"location":"api/#paginator","title":"Paginator","text":"<p>Base class for pagination. Extend to customize.</p>"},{"location":"api/#middleware","title":"Middleware","text":""},{"location":"api/#middleware_1","title":"Middleware","text":"<p>Base class for middleware. Extend to customize.</p>"},{"location":"api/#plugins","title":"Plugins","text":""},{"location":"api/#plugin","title":"Plugin","text":"<p>Base class for plugins. Implement <code>initialize()</code> and <code>register()</code> methods.</p>"},{"location":"api-reference/","title":"API Reference","text":"<p>Complete API reference for all public classes and methods in Pylight.</p>"},{"location":"api-reference/#overview","title":"Overview","text":"<p>This section provides detailed documentation for:</p> <ul> <li>LightApi - Main application class</li> <li>RestEndpoint - Base model class</li> <li>Authentication Classes - JWT and OAuth2</li> <li>Caching Classes - Redis caching</li> <li>Configuration Options - All configuration settings</li> </ul>"},{"location":"api-reference/#quick-navigation","title":"Quick Navigation","text":"<ul> <li>Need to create an app? See LightApi</li> <li>Defining models? See RestEndpoint</li> <li>Authentication? See Authentication Classes</li> <li>Caching? See Caching Classes</li> <li>Configuration? See Configuration Options</li> </ul>"},{"location":"api-reference/#next-steps","title":"Next Steps","text":"<ul> <li>Start with LightApi for app creation</li> <li>Learn about RestEndpoint for model definition</li> <li>Explore Configuration Options for setup</li> </ul>"},{"location":"api-reference/authentication-classes/","title":"Authentication Classes","text":"<p>Documentation for authentication classes in Pylight.</p>"},{"location":"api-reference/authentication-classes/#defaultjwtauthentication","title":"DefaultJWTAuthentication","text":"<p>Default JWT authentication implementation.</p>"},{"location":"api-reference/authentication-classes/#class-definition","title":"Class Definition","text":"<pre><code>class DefaultJWTAuthentication(JWTAuthentication):\n    \"\"\"Default JWT authentication implementation with role support.\"\"\"\n</code></pre>"},{"location":"api-reference/authentication-classes/#methods","title":"Methods","text":""},{"location":"api-reference/authentication-classes/#authenticate","title":"<code>authenticate</code>","text":"<p>Authenticate using JWT token from Authorization header.</p> <pre><code>async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]\n</code></pre> <p>Parameters: - <code>request</code> (Request): Starlette request object</p> <p>Returns: - <code>Optional[dict[str, Any]]</code>: User data dictionary with username and role if authenticated, None otherwise</p> <p>Raises: - <code>AuthenticationError</code>: If JWT token is invalid</p>"},{"location":"api-reference/authentication-classes/#defaultoauth2authentication","title":"DefaultOAuth2Authentication","text":"<p>Default OAuth2 authentication implementation.</p>"},{"location":"api-reference/authentication-classes/#class-definition_1","title":"Class Definition","text":"<pre><code>class DefaultOAuth2Authentication(OAuth2Authentication):\n    \"\"\"Default OAuth2 authentication implementation.\"\"\"\n</code></pre>"},{"location":"api-reference/authentication-classes/#constructor","title":"Constructor","text":"<pre><code>def __init__(\n    self,\n    clientId: str,\n    clientSecret: str,\n    authorizationUrl: str,\n    tokenUrl: str\n) -&gt; None\n</code></pre> <p>Parameters: - <code>clientId</code> (str): OAuth2 client ID - <code>clientSecret</code> (str): OAuth2 client secret - <code>authorizationUrl</code> (str): OAuth2 authorization URL - <code>tokenUrl</code> (str): OAuth2 token URL</p>"},{"location":"api-reference/authentication-classes/#methods_1","title":"Methods","text":""},{"location":"api-reference/authentication-classes/#authenticate_1","title":"<code>authenticate</code>","text":"<p>Authenticate using OAuth2.</p> <pre><code>async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]\n</code></pre> <p>Parameters: - <code>request</code> (Request): Starlette request object</p> <p>Returns: - <code>Optional[dict[str, Any]]</code>: User data dictionary if authenticated, None otherwise</p> <p>Raises: - <code>AuthenticationError</code>: If OAuth2 authentication fails</p>"},{"location":"api-reference/authentication-classes/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Authentication for usage</li> <li>Explore Custom Authentication for customization</li> </ul>"},{"location":"api-reference/caching-classes/","title":"Caching Classes","text":"<p>Documentation for caching classes in Pylight.</p>"},{"location":"api-reference/caching-classes/#defaultrediscache","title":"DefaultRedisCache","text":"<p>Default Redis cache implementation.</p>"},{"location":"api-reference/caching-classes/#class-definition","title":"Class Definition","text":"<pre><code>class DefaultRedisCache(RedisCache):\n    \"\"\"Default Redis cache implementation.\"\"\"\n</code></pre>"},{"location":"api-reference/caching-classes/#constructor","title":"Constructor","text":"<pre><code>def __init__(self, redisUrl: str) -&gt; None\n</code></pre> <p>Parameters: - <code>redisUrl</code> (str): Redis connection URL</p>"},{"location":"api-reference/caching-classes/#methods","title":"Methods","text":""},{"location":"api-reference/caching-classes/#connect","title":"<code>connect</code>","text":"<p>Connect to Redis.</p> <pre><code>async def connect(self) -&gt; None\n</code></pre> <p>Raises: - <code>ConfigurationError</code>: If connection fails</p>"},{"location":"api-reference/caching-classes/#get","title":"<code>get</code>","text":"<p>Get a value from cache.</p> <pre><code>async def get(self, key: str) -&gt; Optional[Any]\n</code></pre> <p>Parameters: - <code>key</code> (str): Cache key</p> <p>Returns: - <code>Optional[Any]</code>: Cached value or None</p>"},{"location":"api-reference/caching-classes/#set","title":"<code>set</code>","text":"<p>Set a value in cache.</p> <pre><code>async def set(\n    self,\n    key: str,\n    value: Any,\n    expirationSeconds: Optional[int] = None\n) -&gt; None\n</code></pre> <p>Parameters: - <code>key</code> (str): Cache key - <code>value</code> (Any): Value to cache - <code>expirationSeconds</code> (Optional[int]): Expiration time in seconds</p>"},{"location":"api-reference/caching-classes/#delete","title":"<code>delete</code>","text":"<p>Delete a value from cache.</p> <pre><code>async def delete(self, key: str) -&gt; None\n</code></pre> <p>Parameters: - <code>key</code> (str): Cache key</p>"},{"location":"api-reference/caching-classes/#flush","title":"<code>flush</code>","text":"<p>Flush all cache entries.</p> <pre><code>async def flush(self) -&gt; None\n</code></pre>"},{"location":"api-reference/caching-classes/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Caching for usage</li> <li>Explore Custom Caching for customization</li> </ul>"},{"location":"api-reference/configuration-options/","title":"Configuration Options","text":"<p>Complete reference for all configuration options in Pylight.</p>"},{"location":"api-reference/configuration-options/#lightapi-configuration","title":"LightApi Configuration","text":""},{"location":"api-reference/configuration-options/#constructor-parameters","title":"Constructor Parameters","text":"<ul> <li><code>databaseUrl</code> (Optional[str]): Database connection URL</li> <li><code>swaggerTitle</code> (str): Swagger documentation title</li> <li><code>swaggerVersion</code> (str): API version</li> <li><code>swaggerDescription</code> (str): API description</li> <li><code>configPath</code> (Optional[str]): Path to YAML configuration file</li> <li><code>configClass</code> (Optional[Type[Any]]): Python class for configuration</li> </ul>"},{"location":"api-reference/configuration-options/#restendpoint-configuration","title":"RestEndpoint Configuration","text":""},{"location":"api-reference/configuration-options/#configuration-class-attributes","title":"Configuration Class Attributes","text":"<ul> <li><code>authentication_class</code> (Optional[Type[Any]]): Custom authentication class</li> <li><code>required_roles</code> (dict[str, list[str]]): Dictionary mapping HTTP method to list of required roles</li> <li><code>caching_class</code> (Optional[Type[Any]]): Custom caching class</li> <li><code>caching_method_names</code> (list[str]): List of HTTP methods to cache</li> <li><code>pagination_class</code> (Optional[Type[Any]]): Custom pagination class</li> <li><code>websocket_class</code> (Optional[Type[WebSocketHandler]]): Custom WebSocket handler class</li> </ul>"},{"location":"api-reference/configuration-options/#yaml-configuration","title":"YAML Configuration","text":""},{"location":"api-reference/configuration-options/#database-configuration","title":"Database Configuration","text":"<pre><code>database:\n  url: \"postgresql://user:password@host:port/database\"\n</code></pre>"},{"location":"api-reference/configuration-options/#swagger-configuration","title":"Swagger Configuration","text":"<pre><code>swagger:\n  title: \"API Title\"\n  version: \"1.0.0\"\n  description: \"API Description\"\n</code></pre>"},{"location":"api-reference/configuration-options/#authentication-configuration","title":"Authentication Configuration","text":"<pre><code>authentication:\n  jwt:\n    secret_key: \"secret-key\"\n  oauth2:\n    client_id: \"client-id\"\n    client_secret: \"client-secret\"\n    authorization_url: \"https://oauth-provider.com/authorize\"\n    token_url: \"https://oauth-provider.com/token\"\n</code></pre>"},{"location":"api-reference/configuration-options/#table-configuration","title":"Table Configuration","text":"<pre><code>tables:\n  - name: \"table_name\"\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\"]\n    authentication:\n      required: true\n    permissions:\n      GET: []\n      POST: [\"admin\"]\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 20\n        max_page_size: 200\n      filtering:\n        enabled: true\n      sorting:\n        enabled: true\n      caching:\n        enabled: true\n      graphql: true\n      websocket: true\n</code></pre>"},{"location":"api-reference/configuration-options/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about YAML Configuration for YAML setup</li> <li>Explore RestEndpoint for model configuration</li> </ul>"},{"location":"api-reference/light-api/","title":"LightApi","text":"<p>Main application class for Pylight framework.</p>"},{"location":"api-reference/light-api/#class-definition","title":"Class Definition","text":"<pre><code>class LightApi:\n    \"\"\"Main application class for Pylight framework.\"\"\"\n</code></pre>"},{"location":"api-reference/light-api/#constructor","title":"Constructor","text":""},{"location":"api-reference/light-api/#__init__","title":"<code>__init__</code>","text":"<p>Initialize LightApi application.</p> <pre><code>def __init__(\n    self,\n    databaseUrl: Optional[str] = None,\n    swaggerTitle: str = \"Pylight API\",\n    swaggerVersion: str = \"1.0.0\",\n    swaggerDescription: str = \"\",\n    configPath: Optional[str] = None,\n    configClass: Optional[Type[Any]] = None,\n) -&gt; None\n</code></pre> <p>Parameters: - <code>databaseUrl</code> (Optional[str]): Database connection URL - <code>swaggerTitle</code> (str): Swagger documentation title (default: \"Pylight API\") - <code>swaggerVersion</code> (str): API version (default: \"1.0.0\") - <code>swaggerDescription</code> (str): API description (default: \"\") - <code>configPath</code> (Optional[str]): Path to YAML configuration file - <code>configClass</code> (Optional[Type[Any]]): Python class for configuration</p> <p>Example:</p> <pre><code>app = LightApi(\n    databaseUrl=\"sqlite:///app.db\",\n    swaggerTitle=\"My API\",\n    swaggerVersion=\"1.0.0\"\n)\n</code></pre>"},{"location":"api-reference/light-api/#class-methods","title":"Class Methods","text":""},{"location":"api-reference/light-api/#fromyamlconfig","title":"<code>fromYamlConfig</code>","text":"<p>Create LightApi instance from YAML table configuration file.</p> <pre><code>@classmethod\ndef fromYamlConfig(cls, yamlPath: str) -&gt; \"LightApi\"\n</code></pre> <p>Parameters: - <code>yamlPath</code> (str): Path to YAML configuration file</p> <p>Returns: - <code>LightApi</code>: LightApi instance with all tables registered and configured</p> <p>Raises: - <code>ConfigurationError</code>: If YAML configuration is invalid - <code>ReflectionError</code>: If database reflection fails</p> <p>Example:</p> <pre><code>app = LightApi.fromYamlConfig(\"config.yaml\")\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"api-reference/light-api/#instance-methods","title":"Instance Methods","text":""},{"location":"api-reference/light-api/#register","title":"<code>register</code>","text":"<p>Register a model class for automatic endpoint generation.</p> <pre><code>def register(self, model: Type[RestEndpoint]) -&gt; None\n</code></pre> <p>Parameters: - <code>model</code> (Type[RestEndpoint]): Model class inheriting from RestEndpoint</p> <p>Raises: - <code>ConfigurationError</code>: If model does not inherit from RestEndpoint</p> <p>Example:</p> <pre><code>app.register(Product)\n</code></pre>"},{"location":"api-reference/light-api/#addmiddleware","title":"<code>addMiddleware</code>","text":"<p>Add middleware to the application.</p> <pre><code>def addMiddleware(self, middleware: List[Any]) -&gt; None\n</code></pre> <p>Parameters: - <code>middleware</code> (List[Any]): List of middleware classes</p> <p>Example:</p> <pre><code>app.addMiddleware([LoggingMiddleware, AuthMiddleware])\n</code></pre>"},{"location":"api-reference/light-api/#registerplugin","title":"<code>registerPlugin</code>","text":"<p>Register a plugin with the application.</p> <pre><code>def registerPlugin(self, pluginClass: Type[Any]) -&gt; None\n</code></pre> <p>Parameters: - <code>pluginClass</code> (Type[Any]): Plugin class to register</p> <p>Example:</p> <pre><code>app.registerPlugin(HealthCheckPlugin)\n</code></pre>"},{"location":"api-reference/light-api/#run","title":"<code>run</code>","text":"<p>Run the application server.</p> <pre><code>def run(self, host: str = \"localhost\", port: int = 8000, debug: bool = False) -&gt; None\n</code></pre> <p>Parameters: - <code>host</code> (str): Host to bind to (default: \"localhost\") - <code>port</code> (int): Port to bind to (default: 8000) - <code>debug</code> (bool): Enable debug mode (default: False)</p> <p>Example:</p> <pre><code>app.run(host=\"0.0.0.0\", port=8000, debug=True)\n</code></pre>"},{"location":"api-reference/light-api/#attributes","title":"Attributes","text":"<ul> <li><code>databaseUrl</code> (Optional[str]): Database connection URL</li> <li><code>swaggerTitle</code> (str): Swagger documentation title</li> <li><code>swaggerVersion</code> (str): API version</li> <li><code>swaggerDescription</code> (str): API description</li> <li><code>registeredModels</code> (List[Type[RestEndpoint]]): List of registered models</li> <li><code>middleware</code> (List[Any]): List of middleware</li> <li><code>pluginRegistry</code> (PluginRegistry): Plugin registry</li> <li><code>databaseManager</code> (Optional[DatabaseManager]): Database manager</li> <li><code>starletteApp</code> (Starlette): Starlette application instance</li> </ul>"},{"location":"api-reference/light-api/#examples","title":"Examples","text":""},{"location":"api-reference/light-api/#basic-usage","title":"Basic Usage","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"api-reference/light-api/#yaml-configuration","title":"YAML Configuration","text":"<pre><code>app = LightApi.fromYamlConfig(\"config.yaml\")\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"api-reference/light-api/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about RestEndpoint for model definition</li> <li>Explore Configuration Options for setup</li> </ul>"},{"location":"api-reference/rest-endpoint/","title":"RestEndpoint","text":"<p>Base class for all REST endpoints/models in Pylight.</p>"},{"location":"api-reference/rest-endpoint/#class-definition","title":"Class Definition","text":"<pre><code>class RestEndpoint(Base):\n    \"\"\"Base class for all REST endpoints/models.\"\"\"\n</code></pre>"},{"location":"api-reference/rest-endpoint/#configuration","title":"Configuration","text":""},{"location":"api-reference/rest-endpoint/#nested-configuration-class","title":"Nested Configuration Class","text":"<pre><code>class Configuration:\n    \"\"\"Endpoint-level configuration.\"\"\"\n\n    authentication_class: Optional[Type[Any]] = None\n    required_roles: dict[str, list[str]] = {}\n    caching_class: Optional[Type[Any]] = None\n    caching_method_names: list[str] = []\n    pagination_class: Optional[Type[Any]] = None\n</code></pre> <p>Configuration Options: - <code>authentication_class</code>: Custom authentication class - <code>required_roles</code>: Dictionary mapping HTTP method to list of required roles - <code>caching_class</code>: Custom caching class - <code>caching_method_names</code>: List of HTTP methods to cache - <code>pagination_class</code>: Custom pagination class</p>"},{"location":"api-reference/rest-endpoint/#class-methods","title":"Class Methods","text":""},{"location":"api-reference/rest-endpoint/#getconfiguration","title":"<code>getConfiguration</code>","text":"<p>Get endpoint-level configuration instance.</p> <pre><code>@classmethod\ndef getConfiguration(cls) -&gt; Any\n</code></pre> <p>Returns: - Configuration instance</p>"},{"location":"api-reference/rest-endpoint/#gettablename","title":"<code>getTableName</code>","text":"<p>Get the table name for this model.</p> <pre><code>@classmethod\ndef getTableName(cls) -&gt; str\n</code></pre> <p>Returns: - Table name (from <code>__tablename__</code> or lowercase class name)</p>"},{"location":"api-reference/rest-endpoint/#usage-example","title":"Usage Example","text":"<pre><code>from pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\nfrom pylight.infrastructure.auth.jwt import DefaultJWTAuthentication\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\n    class Configuration:\n        authentication_class = DefaultJWTAuthentication\n        required_roles = {\n            \"GET\": [],\n            \"POST\": [\"admin\"]\n        }\n        caching_method_names = [\"GET\"]\n</code></pre>"},{"location":"api-reference/rest-endpoint/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about LightApi for app creation</li> <li>Explore Configuration Options for setup</li> </ul>"},{"location":"api-reference/websocket-classes/","title":"WebSocket Handler Classes","text":"<p>Documentation for WebSocket handler classes in Pylight.</p>"},{"location":"api-reference/websocket-classes/#implementation-notes","title":"Implementation Notes","text":"<p>The WebSocket handler implementation follows clean code principles: - Message loop is extracted to a separate function for better readability - Error handling uses separate try-catch blocks for receive operations and handler method calls - Early returns are used for connection setup failures - No <code>else</code> statements are used in conditional logic</p> <p>These implementation details are internal to the framework and do not affect how you use the WebSocket handlers.</p>"},{"location":"api-reference/websocket-classes/#websockethandler","title":"WebSocketHandler","text":"<p>Base class for WebSocket connection handling. Provides default implementations for all lifecycle methods that can be optionally overridden.</p>"},{"location":"api-reference/websocket-classes/#class-definition","title":"Class Definition","text":"<pre><code>class WebSocketHandler:\n    \"\"\"Base class for WebSocket connection handling.\"\"\"\n</code></pre>"},{"location":"api-reference/websocket-classes/#methods","title":"Methods","text":""},{"location":"api-reference/websocket-classes/#on_connect","title":"<code>on_connect</code>","text":"<p>Handle WebSocket connection establishment.</p> <pre><code>async def on_connect(\n    self, \n    websocket: WebSocket, \n    model: Type[RestEndpoint]\n) -&gt; None\n</code></pre> <p>Parameters: - <code>websocket</code> (WebSocket): Starlette WebSocket connection object - <code>model</code> (Type[RestEndpoint]): RestEndpoint model class for this connection</p> <p>Returns: - <code>None</code></p> <p>Default Behavior: Logs connection establishment.</p> <p>Example: <pre><code>class CustomHandler(WebSocketHandler):\n    async def on_connect(self, websocket, model):\n        await self.send(websocket, {\"status\": \"connected\"})\n</code></pre></p>"},{"location":"api-reference/websocket-classes/#on_message","title":"<code>on_message</code>","text":"<p>Handle incoming WebSocket message.</p> <pre><code>async def on_message(\n    self, \n    websocket: WebSocket, \n    model: Type[RestEndpoint], \n    message: str\n) -&gt; None\n</code></pre> <p>Parameters: - <code>websocket</code> (WebSocket): Starlette WebSocket connection object - <code>model</code> (Type[RestEndpoint]): RestEndpoint model class for this connection - <code>message</code> (str): Raw message string from client</p> <p>Returns: - <code>None</code></p> <p>Default Behavior: Echoes message back to client.</p> <p>Example: <pre><code>class CustomHandler(WebSocketHandler):\n    async def on_message(self, websocket, model, message):\n        import json\n        data = json.loads(message)\n        await self.send(websocket, {\"echo\": data})\n</code></pre></p>"},{"location":"api-reference/websocket-classes/#on_disconnect","title":"<code>on_disconnect</code>","text":"<p>Handle WebSocket connection closure.</p> <pre><code>async def on_disconnect(\n    self, \n    websocket: WebSocket, \n    model: Type[RestEndpoint]\n) -&gt; None\n</code></pre> <p>Parameters: - <code>websocket</code> (WebSocket): Starlette WebSocket connection object - <code>model</code> (Type[RestEndpoint]): RestEndpoint model class for this connection</p> <p>Returns: - <code>None</code></p> <p>Default Behavior: Logs disconnection.</p> <p>Example: <pre><code>class CustomHandler(WebSocketHandler):\n    async def on_disconnect(self, websocket, model):\n        print(f\"Client disconnected from {model.__name__}\")\n</code></pre></p>"},{"location":"api-reference/websocket-classes/#send","title":"<code>send</code>","text":"<p>Helper method to send message to client.</p> <pre><code>async def send(\n    self, \n    websocket: WebSocket, \n    message: str | dict\n) -&gt; None\n</code></pre> <p>Parameters: - <code>websocket</code> (WebSocket): Starlette WebSocket connection object - <code>message</code> (str | dict): String or dict to send (dict auto-converted to JSON)</p> <p>Returns: - <code>None</code></p> <p>Behavior: - If <code>message</code> is a dict, converts to JSON and sends via <code>websocket.send_json()</code> - If <code>message</code> is a string, sends via <code>websocket.send_text()</code> - Logs errors but does not raise exceptions</p> <p>Example: <pre><code>class CustomHandler(WebSocketHandler):\n    async def on_message(self, websocket, model, message):\n        # Send string\n        await self.send(websocket, \"Hello, client!\")\n\n        # Send dict (auto-converted to JSON)\n        await self.send(websocket, {\"type\": \"notification\", \"message\": \"Update\"})\n</code></pre></p>"},{"location":"api-reference/websocket-classes/#defaultwebsockethandler","title":"DefaultWebSocketHandler","text":"<p>Default WebSocket handler that matches current behavior for backward compatibility.</p>"},{"location":"api-reference/websocket-classes/#class-definition_1","title":"Class Definition","text":"<pre><code>class DefaultWebSocketHandler(WebSocketHandler):\n    \"\"\"Default WebSocket handler that matches current behavior.\"\"\"\n</code></pre>"},{"location":"api-reference/websocket-classes/#behavior","title":"Behavior","text":"<ul> <li>Extends <code>WebSocketHandler</code></li> <li>Overrides <code>on_message()</code> to echo messages back to clients</li> <li>Used automatically when no custom <code>websocket_class</code> is specified in model Configuration</li> </ul>"},{"location":"api-reference/websocket-classes/#usage","title":"Usage","text":"<p>The framework uses <code>DefaultWebSocketHandler</code> automatically when no custom handler is configured:</p> <pre><code>class Product(RestEndpoint):\n    __tablename__ = \"products\"\n    # No websocket_class specified - uses DefaultWebSocketHandler\n</code></pre>"},{"location":"api-reference/websocket-classes/#configuration","title":"Configuration","text":""},{"location":"api-reference/websocket-classes/#restendpointconfigurationwebsocket_class","title":"RestEndpoint.Configuration.websocket_class","text":"<p>Configure a custom WebSocket handler class for a model.</p> <p>Type: <code>Optional[Type[WebSocketHandler]]</code></p> <p>Default: <code>None</code> (uses <code>DefaultWebSocketHandler</code>)</p> <p>Example: <pre><code>from pylight.infrastructure.websocket.base import WebSocketHandler\n\nclass CustomHandler(WebSocketHandler):\n    async def on_message(self, websocket, model, message):\n        await self.send(websocket, {\"custom\": \"response\"})\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    class Configuration:\n        websocket_class = CustomHandler\n</code></pre></p> <p>Validation: The framework validates that <code>websocket_class</code> is a subclass of <code>WebSocketHandler</code> at model registration time. Invalid classes raise <code>PylightError</code>.</p>"},{"location":"api-reference/websocket-classes/#error-handling","title":"Error Handling","text":"<p>All lifecycle methods are wrapped with error handling:</p> <ul> <li>Exceptions in <code>on_connect()</code>: Logged, connection closed gracefully, early return prevents further processing</li> <li>Exceptions in <code>on_message()</code>: Logged, connection closed gracefully, other connections continue. Receive errors and handler errors are handled separately for better error isolation</li> <li>Exceptions in <code>on_disconnect()</code>: Logged, cleanup continues</li> <li>Exceptions in <code>send()</code>: Logged, does not raise</li> </ul> <p>Errors in one connection do not affect other connections. The framework uses separate error handling for receive operations and handler method calls to improve debugging and error isolation.</p>"},{"location":"api-reference/websocket-classes/#async-support","title":"Async Support","text":"<p>All methods are async and can perform async operations:</p> <pre><code>class DatabaseHandler(WebSocketHandler):\n    async def on_message(self, websocket, model, message):\n        # Perform async database query\n        result = await database.query(model).filter(...).first()\n        await self.send(websocket, {\"result\": result})\n</code></pre> <p>Multiple connections execute async methods concurrently without blocking.</p>"},{"location":"api-reference/websocket-classes/#see-also","title":"See Also","text":"<ul> <li>WebSocket Documentation for usage examples</li> <li>Customization Guide for advanced patterns</li> <li>Configuration Options for endpoint configuration</li> </ul>"},{"location":"building-apis/","title":"Building APIs","text":"<p>This section covers all the features available in Pylight for building powerful APIs. Each feature is documented with examples and best practices.</p>"},{"location":"building-apis/#available-features","title":"Available Features","text":""},{"location":"building-apis/#core-features","title":"Core Features","text":"<ul> <li>REST Endpoints - Automatic CRUD endpoint generation</li> <li>GraphQL - GraphQL queries and mutations</li> <li>WebSocket - Real-time WebSocket connections</li> </ul>"},{"location":"building-apis/#security-access-control","title":"Security &amp; Access Control","text":"<ul> <li>Authentication - JWT and OAuth2 authentication with role-based access control</li> </ul>"},{"location":"building-apis/#performance-data-management","title":"Performance &amp; Data Management","text":"<ul> <li>Caching - Redis caching for improved performance</li> <li>Pagination, Filtering, and Sorting - Built-in data management features</li> </ul>"},{"location":"building-apis/#configuration-setup","title":"Configuration &amp; Setup","text":"<ul> <li>YAML Configuration - Configure APIs using YAML files</li> <li>Database Reflection - Generate models from existing databases</li> <li>Plugins - Extend Pylight with custom plugins</li> </ul>"},{"location":"building-apis/#quick-navigation","title":"Quick Navigation","text":"<p>Choose a feature to learn more:</p> <ul> <li>Need to create REST APIs? Start with REST Endpoints</li> <li>Want GraphQL support? See GraphQL</li> <li>Need real-time updates? Check WebSocket</li> <li>Securing your API? Read Authentication</li> <li>Improving performance? Learn about Caching</li> <li>Configuring via YAML? See YAML Configuration</li> </ul>"},{"location":"building-apis/#feature-combinations","title":"Feature Combinations","text":"<p>Many features work together:</p> <ul> <li>REST + Authentication: Secure REST endpoints with JWT/OAuth2</li> <li>GraphQL + Caching: Cache GraphQL query results</li> <li>WebSocket + Authentication: Secure WebSocket connections</li> <li>YAML + All Features: Configure everything via YAML</li> </ul>"},{"location":"building-apis/#next-steps","title":"Next Steps","text":"<ul> <li>Start with REST Endpoints for basic API creation</li> <li>Add Authentication to secure your API</li> <li>Use YAML Configuration for complex setups</li> <li>Explore Use Cases for real-world examples</li> </ul>"},{"location":"building-apis/authentication/","title":"Authentication","text":"<p>Pylight supports JWT and OAuth2 authentication out of the box, with role-based access control for fine-grained permissions.</p>"},{"location":"building-apis/authentication/#overview","title":"Overview","text":"<p>Pylight provides:</p> <ul> <li>JWT Authentication: Token-based authentication with role support</li> <li>OAuth2 Authentication: OAuth2 provider integration</li> <li>Role-Based Access Control: Control access per HTTP method and role</li> <li>Per-Table Configuration: Configure authentication per table</li> </ul>"},{"location":"building-apis/authentication/#jwt-authentication","title":"JWT Authentication","text":""},{"location":"building-apis/authentication/#basic-setup","title":"Basic Setup","text":"<p>Configure JWT authentication in your YAML file:</p> <pre><code>authentication:\n  jwt:\n    secret_key: \"your-secret-key-change-in-production\"\n\ntables:\n  - name: \"products\"\n    authentication:\n      required: true\n    permissions:\n      GET: []  # Any authenticated user\n      POST: [\"admin\"]\n      PUT: [\"admin\"]\n      DELETE: [\"admin\"]\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/auth_config.yaml</code></p>"},{"location":"building-apis/authentication/#programmatic-setup","title":"Programmatic Setup","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom pylight.infrastructure.auth.jwt import DefaultJWTAuthentication\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n\n    class Configuration:\n        authentication_class = DefaultJWTAuthentication\n        required_roles = {\n            \"GET\": [],  # Any authenticated user\n            \"POST\": [\"admin\"],\n            \"PUT\": [\"admin\"],\n            \"DELETE\": [\"admin\"]\n        }\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"building-apis/authentication/#generating-jwt-tokens","title":"Generating JWT Tokens","text":"<p>To generate JWT tokens for testing:</p> <pre><code>import jwt\nimport datetime\n\nsecret_key = \"your-secret-key\"\npayload = {\n    \"username\": \"admin\",\n    \"role\": \"admin\",\n    \"sub\": \"admin\",\n    \"exp\": datetime.datetime.utcnow() + datetime.timedelta(hours=24)\n}\ntoken = jwt.encode(payload, secret_key, algorithm=\"HS256\")\nprint(f\"Bearer {token}\")\n</code></pre>"},{"location":"building-apis/authentication/#using-jwt-tokens","title":"Using JWT Tokens","text":"<p>Include the token in the Authorization header:</p> <pre><code>curl -H \"Authorization: Bearer YOUR_JWT_TOKEN\" \\\n     http://localhost:8000/api/products\n</code></pre>"},{"location":"building-apis/authentication/#oauth2-authentication","title":"OAuth2 Authentication","text":""},{"location":"building-apis/authentication/#basic-setup_1","title":"Basic Setup","text":"<p>Configure OAuth2 authentication:</p> <pre><code>authentication:\n  oauth2:\n    client_id: \"your-oauth-client-id\"\n    client_secret: \"your-oauth-client-secret\"\n    authorization_url: \"https://oauth-provider.com/authorize\"\n    token_url: \"https://oauth-provider.com/token\"\n\ntables:\n  - name: \"products\"\n    authentication:\n      required: true\n</code></pre>"},{"location":"building-apis/authentication/#programmatic-setup_1","title":"Programmatic Setup","text":"<pre><code>from pylight.infrastructure.auth.oauth2 import DefaultOAuth2Authentication\n\nclass Product(RestEndpoint):\n    class Configuration:\n        authentication_class = DefaultOAuth2Authentication(\n            clientId=\"your-client-id\",\n            clientSecret=\"your-client-secret\",\n            authorizationUrl=\"https://oauth-provider.com/authorize\",\n            tokenUrl=\"https://oauth-provider.com/token\"\n        )\n</code></pre>"},{"location":"building-apis/authentication/#role-based-access-control","title":"Role-Based Access Control","text":""},{"location":"building-apis/authentication/#permission-configuration","title":"Permission Configuration","text":"<p>Control access per HTTP method and role:</p> <pre><code>tables:\n  - name: \"products\"\n    permissions:\n      GET: []              # Any authenticated user\n      POST: [\"admin\"]      # Only admin role\n      PUT: [\"admin\", \"editor\"]  # Admin or editor roles\n      DELETE: [\"admin\"]    # Only admin role\n</code></pre>"},{"location":"building-apis/authentication/#public-access","title":"Public Access","text":"<p>Allow public access (no authentication):</p> <pre><code>tables:\n  - name: \"public_data\"\n    authentication:\n      required: false  # No authentication required\n</code></pre>"},{"location":"building-apis/authentication/#mixed-access","title":"Mixed Access","text":"<p>Different methods require different authentication:</p> <pre><code>tables:\n  - name: \"products\"\n    authentication:\n      required: true  # Authentication required for this table\n    permissions:\n      GET: []          # Public read access\n      POST: [\"user\"]    # Authenticated users can create\n      PUT: [\"admin\"]    # Only admins can update\n      DELETE: [\"admin\"] # Only admins can delete\n</code></pre>"},{"location":"building-apis/authentication/#custom-authentication","title":"Custom Authentication","text":"<p>Extend the base authentication classes for custom logic:</p> <pre><code>from pylight.infrastructure.auth.jwt import DefaultJWTAuthentication\nfrom starlette.requests import Request\n\nclass CustomJWTAuthentication(DefaultJWTAuthentication):\n    async def authenticate(self, request: Request):\n        # Custom authentication logic\n        user = await super().authenticate(request)\n        if user:\n            # Additional validation\n            if user.get(\"role\") == \"banned\":\n                return None\n        return user\n</code></pre>"},{"location":"building-apis/authentication/#authentication-flow","title":"Authentication Flow","text":"<ol> <li>Request arrives with Authorization header</li> <li>Authentication middleware extracts token</li> <li>Authentication class validates token</li> <li>User data extracted (username, role)</li> <li>Permission check validates role against required roles</li> <li>Request proceeds if authorized, otherwise 401/403</li> </ol>"},{"location":"building-apis/authentication/#error-responses","title":"Error Responses","text":""},{"location":"building-apis/authentication/#401-unauthorized","title":"401 Unauthorized","text":"<p>No token or invalid token:</p> <pre><code>{\n  \"error\": \"Authentication required\",\n  \"detail\": \"Invalid or missing JWT token\"\n}\n</code></pre>"},{"location":"building-apis/authentication/#403-forbidden","title":"403 Forbidden","text":"<p>Valid token but insufficient permissions:</p> <pre><code>{\n  \"error\": \"Insufficient permissions\",\n  \"detail\": \"Role 'user' does not have permission for POST\"\n}\n</code></pre>"},{"location":"building-apis/authentication/#best-practices","title":"Best Practices","text":"<ol> <li>Use Strong Secret Keys: Generate random, secure secret keys for JWT</li> <li>Set Token Expiration: Always set expiration times for tokens</li> <li>Use HTTPS: Always use HTTPS in production</li> <li>Validate Roles: Always validate roles on the server side</li> <li>Least Privilege: Grant minimum required permissions</li> </ol>"},{"location":"building-apis/authentication/#examples","title":"Examples","text":"<p>For complete authentication examples, see: - Authentication Config Example - Use Cases for authenticated API examples</p>"},{"location":"building-apis/authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Caching for performance</li> <li>Explore YAML Configuration for complex setups</li> <li>Check out Custom Authentication for advanced use cases</li> </ul>"},{"location":"building-apis/caching/","title":"Caching","text":"<p>Pylight integrates with Redis to provide efficient caching for API responses, improving performance and reducing database load.</p>"},{"location":"building-apis/caching/#overview","title":"Overview","text":"<p>Pylight caching provides:</p> <ul> <li>Redis Integration: Fast in-memory caching</li> <li>Automatic Cache Management: Cache invalidation on updates</li> <li>Per-Method Caching: Cache specific HTTP methods</li> <li>Configurable Expiration: Set cache TTL per endpoint</li> </ul>"},{"location":"building-apis/caching/#basic-setup","title":"Basic Setup","text":""},{"location":"building-apis/caching/#redis-installation","title":"Redis Installation","text":"<p>Start Redis (using Docker):</p> <pre><code>docker run -d -p 6379:6379 redis:latest\n</code></pre> <p>Or install locally:</p> <pre><code># macOS\nbrew install redis\nredis-server\n\n# Linux\napt-get install redis-server\nredis-server\n</code></pre>"},{"location":"building-apis/caching/#configuration","title":"Configuration","text":"<p>Enable caching in YAML:</p> <pre><code>tables:\n  - name: \"products\"\n    features:\n      caching:\n        enabled: true\n</code></pre> <p>Or programmatically:</p> <pre><code>from pylight.infrastructure.cache.redis import DefaultRedisCache\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n\n    class Configuration:\n        caching_class = DefaultRedisCache\n        caching_method_names = [\"GET\"]  # Cache GET requests\n</code></pre>"},{"location":"building-apis/caching/#cache-configuration","title":"Cache Configuration","text":""},{"location":"building-apis/caching/#redis-url","title":"Redis URL","text":"<p>Default Redis URL: <code>redis://localhost:6379</code></p> <p>Custom Redis URL:</p> <pre><code>app = LightApi(\n    databaseUrl=\"sqlite:///app.db\",\n    redisUrl=\"redis://localhost:6379/0\"\n)\n</code></pre>"},{"location":"building-apis/caching/#cache-expiration","title":"Cache Expiration","text":"<p>Set cache TTL (time to live):</p> <pre><code>class Product(RestEndpoint):\n    class Configuration:\n        caching_class = DefaultRedisCache\n        caching_method_names = [\"GET\"]\n        cache_expiration_seconds = 3600  # 1 hour\n</code></pre>"},{"location":"building-apis/caching/#caching-behavior","title":"Caching Behavior","text":""},{"location":"building-apis/caching/#get-requests","title":"GET Requests","text":"<p>GET requests are cached by default when caching is enabled:</p> <pre><code># First request - hits database\nGET /api/products\n\n# Subsequent requests - served from cache\nGET /api/products\n</code></pre>"},{"location":"building-apis/caching/#cache-invalidation","title":"Cache Invalidation","text":"<p>Cache is automatically invalidated when:</p> <ul> <li>POST: New item created</li> <li>PUT: Item updated</li> <li>DELETE: Item deleted</li> </ul>"},{"location":"building-apis/caching/#cache-keys","title":"Cache Keys","text":"<p>Cache keys are generated based on: - Table name - HTTP method - Query parameters (for filtering/sorting)</p> <p>Example cache key: <code>products:GET:page=1&amp;limit=10</code></p>"},{"location":"building-apis/caching/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"building-apis/caching/#per-method-caching","title":"Per-Method Caching","text":"<p>Cache only specific methods:</p> <pre><code>tables:\n  - name: \"products\"\n    features:\n      caching:\n        enabled: true\n        methods: [\"GET\"]  # Only cache GET requests\n</code></pre>"},{"location":"building-apis/caching/#selective-caching","title":"Selective Caching","text":"<p>Cache only specific endpoints:</p> <pre><code>class Product(RestEndpoint):\n    class Configuration:\n        caching_method_names = [\"GET\"]  # Only GET, not POST/PUT/DELETE\n</code></pre>"},{"location":"building-apis/caching/#custom-cache-prefix","title":"Custom Cache Prefix","text":"<pre><code>class CustomCache(DefaultRedisCache):\n    def __init__(self, redisUrl: str):\n        super().__init__(redisUrl)\n        self.prefix = \"myapp:\"  # Custom prefix\n</code></pre>"},{"location":"building-apis/caching/#cache-management","title":"Cache Management","text":""},{"location":"building-apis/caching/#manual-cache-clearing","title":"Manual Cache Clearing","text":"<pre><code>from pylight.infrastructure.cache.redis import DefaultRedisCache\n\ncache = DefaultRedisCache(\"redis://localhost:6379\")\nawait cache.flush()  # Clear all cache\n</code></pre>"},{"location":"building-apis/caching/#cache-statistics","title":"Cache Statistics","text":"<p>Monitor cache performance:</p> <pre><code># Check cache hit rate\n# Monitor Redis metrics\nredis-cli INFO stats\n</code></pre>"},{"location":"building-apis/caching/#best-practices","title":"Best Practices","text":"<ol> <li>Cache Read-Heavy Endpoints: Cache GET requests for frequently accessed data</li> <li>Set Appropriate TTL: Balance freshness with performance</li> <li>Monitor Cache Hit Rate: Track cache effectiveness</li> <li>Use Cache Warming: Pre-populate cache for critical data</li> <li>Handle Cache Failures: Gracefully degrade if Redis is unavailable</li> </ol>"},{"location":"building-apis/caching/#performance-considerations","title":"Performance Considerations","text":""},{"location":"building-apis/caching/#cache-hit-rate","title":"Cache Hit Rate","text":"<p>Aim for 80%+ cache hit rate for optimal performance.</p>"},{"location":"building-apis/caching/#memory-usage","title":"Memory Usage","text":"<p>Monitor Redis memory usage:</p> <pre><code>redis-cli INFO memory\n</code></pre>"},{"location":"building-apis/caching/#cache-warming","title":"Cache Warming","text":"<p>Pre-populate cache on startup:</p> <pre><code>async def warm_cache():\n    # Pre-fetch frequently accessed data\n    products = await get_popular_products()\n    for product in products:\n        await cache.set(f\"product:{product.id}\", product)\n</code></pre>"},{"location":"building-apis/caching/#troubleshooting","title":"Troubleshooting","text":""},{"location":"building-apis/caching/#cache-not-working","title":"Cache Not Working","text":"<ol> <li>Verify Redis is running: <code>redis-cli ping</code></li> <li>Check Redis URL configuration</li> <li>Verify caching is enabled for the table</li> <li>Check cache expiration settings</li> </ol>"},{"location":"building-apis/caching/#high-memory-usage","title":"High Memory Usage","text":"<ol> <li>Reduce cache TTL</li> <li>Limit cached endpoints</li> <li>Use Redis eviction policies</li> <li>Monitor cache size</li> </ol>"},{"location":"building-apis/caching/#examples","title":"Examples","text":"<p>For complete caching examples, see: - Features Config Example - Use Cases for real-world patterns</p>"},{"location":"building-apis/caching/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Pagination, Filtering, and Sorting</li> <li>Explore YAML Configuration for complex setups</li> <li>Check out Custom Caching for advanced use cases</li> </ul>"},{"location":"building-apis/database-reflection/","title":"Database Reflection","text":"<p>Pylight can automatically generate models from existing database schemas, eliminating the need to manually define models for existing databases.</p>"},{"location":"building-apis/database-reflection/#overview","title":"Overview","text":"<p>Database reflection allows you to:</p> <ul> <li>Generate Models from Database: Automatically create models from existing tables</li> <li>No Manual Model Definition: Skip writing model classes</li> <li>YAML-Driven: Configure everything via YAML</li> <li>Schema Discovery: Automatically discover table structures</li> </ul>"},{"location":"building-apis/database-reflection/#basic-usage","title":"Basic Usage","text":""},{"location":"building-apis/database-reflection/#using-yaml-configuration","title":"Using YAML Configuration","text":"<p>Simply specify table names in your YAML file:</p> <pre><code>database:\n  url: \"postgresql://postgres:postgres@localhost:5432/pylight\"\n\ntables:\n  - name: \"products\"\n  - name: \"users\"\n  - name: \"orders\"\n</code></pre> <p>Pylight will: 1. Connect to the database 2. Reflect the table schemas 3. Generate models dynamically 4. Register endpoints</p>"},{"location":"building-apis/database-reflection/#programmatic-usage","title":"Programmatic Usage","text":"<pre><code>from pylight.infrastructure.database.reflection import DatabaseReflection\nfrom pylight.presentation.app import LightApi\n\n# Reflect database\nreflection = DatabaseReflection(\"postgresql://postgres:postgres@localhost:5432/pylight\")\ntable_info = reflection.reflectTable(\"products\")\n\n# Use reflected schema to generate models\n# (Models are generated automatically when using YAML)\n</code></pre>"},{"location":"building-apis/database-reflection/#how-it-works","title":"How It Works","text":"<ol> <li>Database Connection: Pylight connects to your database</li> <li>Schema Reflection: SQLAlchemy reflects table structures</li> <li>Model Generation: Models are generated dynamically</li> <li>Endpoint Registration: REST, GraphQL, and WebSocket endpoints are created</li> </ol>"},{"location":"building-apis/database-reflection/#supported-databases","title":"Supported Databases","text":"<ul> <li>PostgreSQL: Full support with async driver</li> <li>MySQL: Full support</li> <li>SQLite: Full support</li> </ul>"},{"location":"building-apis/database-reflection/#table-discovery","title":"Table Discovery","text":"<p>Reflect all tables in a database:</p> <pre><code>from pylight.infrastructure.database.reflection import DatabaseReflection\n\nreflection = DatabaseReflection(\"postgresql://postgres:postgres@localhost:5432/pylight\")\ntables = reflection.reflectTables()\nprint(tables)  # ['products', 'users', 'orders']\n</code></pre>"},{"location":"building-apis/database-reflection/#column-types","title":"Column Types","text":"<p>Pylight automatically maps database column types to SQLAlchemy types:</p> <ul> <li><code>INTEGER</code> \u2192 <code>Integer</code></li> <li><code>VARCHAR</code> \u2192 <code>String</code></li> <li><code>TEXT</code> \u2192 <code>Text</code></li> <li><code>BOOLEAN</code> \u2192 <code>Boolean</code></li> <li><code>TIMESTAMP</code> \u2192 <code>DateTime</code></li> <li><code>FLOAT</code> \u2192 <code>Float</code></li> <li><code>DECIMAL</code> \u2192 <code>Numeric</code></li> </ul>"},{"location":"building-apis/database-reflection/#relationships","title":"Relationships","text":"<p>Foreign key relationships are automatically discovered:</p> <pre><code>CREATE TABLE products (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100)\n);\n\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    product_id INTEGER REFERENCES products(id)\n);\n</code></pre> <p>Pylight will reflect these relationships and make them available in GraphQL queries.</p>"},{"location":"building-apis/database-reflection/#configuration-with-reflection","title":"Configuration with Reflection","text":"<p>Combine reflection with feature configuration:</p> <pre><code>database:\n  url: \"postgresql://postgres:postgres@localhost:5432/pylight\"\n\ntables:\n  - name: \"products\"\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\"]\n    features:\n      pagination:\n        enabled: true\n      caching:\n        enabled: true\n</code></pre>"},{"location":"building-apis/database-reflection/#validation","title":"Validation","text":"<p>Pylight validates that:</p> <ul> <li>Tables Exist: All specified tables exist in the database</li> <li>Connection Works: Database connection is successful</li> <li>Schema is Valid: Table schemas can be reflected</li> </ul> <p>Example error:</p> <pre><code>Tables not found in database: invalid_table. \nAvailable tables: products, users, orders. \nAction: Ensure table names in YAML match existing database tables.\n</code></pre>"},{"location":"building-apis/database-reflection/#limitations","title":"Limitations","text":"<ul> <li>Complex Relationships: Very complex relationships may need manual model definition</li> <li>Custom Types: Custom database types may need manual mapping</li> <li>Views: Database views are not automatically reflected (use tables)</li> </ul>"},{"location":"building-apis/database-reflection/#best-practices","title":"Best Practices","text":"<ol> <li>Use Existing Tables: Reflection works best with existing, well-structured tables</li> <li>Validate Early: Check table existence before deployment</li> <li>Combine with YAML: Use YAML configuration for reflection + features</li> <li>Document Schema: Keep database schema documentation up to date</li> </ol>"},{"location":"building-apis/database-reflection/#troubleshooting","title":"Troubleshooting","text":""},{"location":"building-apis/database-reflection/#table-not-found","title":"Table Not Found","text":"<p>Ensure table names match exactly (case-sensitive for some databases):</p> <pre><code>tables:\n  - name: \"products\"  # Must match exact table name\n</code></pre>"},{"location":"building-apis/database-reflection/#connection-errors","title":"Connection Errors","text":"<p>Verify database URL and credentials:</p> <pre><code>database:\n  url: \"postgresql://user:password@host:port/database\"\n</code></pre>"},{"location":"building-apis/database-reflection/#schema-reflection-errors","title":"Schema Reflection Errors","text":"<p>Check table structure:</p> <pre><code>\\d products  -- PostgreSQL\nDESCRIBE products;  -- MySQL\n</code></pre>"},{"location":"building-apis/database-reflection/#examples","title":"Examples","text":"<p>For complete reflection examples, see: - YAML Configuration for YAML-based reflection - Use Cases for migration scenarios</p>"},{"location":"building-apis/database-reflection/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about YAML Configuration for complete setup</li> <li>Explore REST Endpoints for generated endpoints</li> <li>Check out Use Cases for real-world examples</li> </ul>"},{"location":"building-apis/graphql/","title":"GraphQL","text":"<p>Pylight automatically generates GraphQL schemas and resolvers for your models, providing a flexible query interface alongside REST endpoints.</p>"},{"location":"building-apis/graphql/#overview","title":"Overview","text":"<p>When you register a model, Pylight automatically creates:</p> <ul> <li>GraphQL Queries: Query your data with flexible field selection</li> <li>GraphQL Mutations: Create, update, and delete operations</li> <li>GraphiQL Interface: Interactive GraphQL explorer at <code>/graphiql</code></li> <li>GraphQL Endpoint: Available at <code>/graphql</code></li> </ul>"},{"location":"building-apis/graphql/#basic-example","title":"Basic Example","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre> <p>This automatically creates GraphQL queries and mutations for the <code>products</code> table.</p>"},{"location":"building-apis/graphql/#graphql-queries","title":"GraphQL Queries","text":""},{"location":"building-apis/graphql/#list-all-items","title":"List All Items","text":"<pre><code>query {\n  products {\n    id\n    name\n    price\n  }\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"data\": {\n    \"products\": [\n      {\n        \"id\": 1,\n        \"name\": \"Laptop\",\n        \"price\": 999\n      },\n      {\n        \"id\": 2,\n        \"name\": \"Mouse\",\n        \"price\": 29\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#get-single-item","title":"Get Single Item","text":"<pre><code>query {\n  product(id: 1) {\n    id\n    name\n    price\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#filtering","title":"Filtering","text":"<pre><code>query {\n  products(filter: {price: {gt: 100}}) {\n    id\n    name\n    price\n  }\n}\n</code></pre> <p>Filter operators: - <code>eq</code>: Equals - <code>ne</code>: Not equals - <code>gt</code>: Greater than - <code>gte</code>: Greater than or equal - <code>lt</code>: Less than - <code>lte</code>: Less than or equal - <code>like</code>: Pattern matching - <code>in</code>: Value in list</p>"},{"location":"building-apis/graphql/#sorting","title":"Sorting","text":"<pre><code>query {\n  products(sort: \"-price\") {\n    id\n    name\n    price\n  }\n}\n</code></pre> <p>Use <code>-</code> prefix for descending order.</p>"},{"location":"building-apis/graphql/#pagination","title":"Pagination","text":"<pre><code>query {\n  products(page: 1, limit: 10) {\n    id\n    name\n    price\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#graphql-mutations","title":"GraphQL Mutations","text":""},{"location":"building-apis/graphql/#create-item","title":"Create Item","text":"<pre><code>mutation {\n  createProduct(name: \"Keyboard\", price: 79) {\n    id\n    name\n    price\n  }\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"data\": {\n    \"createProduct\": {\n      \"id\": 3,\n      \"name\": \"Keyboard\",\n      \"price\": 79\n    }\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#update-item","title":"Update Item","text":"<pre><code>mutation {\n  updateProduct(id: 1, name: \"Updated Laptop\", price: 1099) {\n    id\n    name\n    price\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#delete-item","title":"Delete Item","text":"<pre><code>mutation {\n  deleteProduct(id: 1) {\n    id\n  }\n}\n</code></pre> <p>View source: <code>docs/examples/graphql_queries.py</code></p>"},{"location":"building-apis/graphql/#graphiql-interface","title":"GraphiQL Interface","text":"<p>Access the interactive GraphQL explorer at:</p> <pre><code>http://localhost:8000/graphiql\n</code></pre> <p>GraphiQL provides: - Interactive query editor - Schema explorer - Query history - Auto-completion</p>"},{"location":"building-apis/graphql/#field-selection","title":"Field Selection","text":"<p>One of GraphQL's key features is flexible field selection:</p> <pre><code># Get only specific fields\nquery {\n  products {\n    id\n    name\n  }\n}\n\n# Get all fields\nquery {\n  products {\n    id\n    name\n    price\n    description\n    createdAt\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#nested-queries","title":"Nested Queries","text":"<p>For relationships (when models have foreign keys):</p> <pre><code>query {\n  products {\n    id\n    name\n    category {\n      id\n      name\n    }\n  }\n}\n</code></pre>"},{"location":"building-apis/graphql/#authentication","title":"Authentication","text":"<p>To require authentication for GraphQL queries and mutations, see Authentication.</p>"},{"location":"building-apis/graphql/#caching","title":"Caching","text":"<p>To enable caching for GraphQL queries, see Caching.</p>"},{"location":"building-apis/graphql/#error-handling","title":"Error Handling","text":"<p>GraphQL returns errors in a structured format:</p> <pre><code>{\n  \"errors\": [\n    {\n      \"message\": \"Product not found\",\n      \"path\": [\"product\"],\n      \"extensions\": {\n        \"code\": \"NOT_FOUND\"\n      }\n    }\n  ],\n  \"data\": null\n}\n</code></pre>"},{"location":"building-apis/graphql/#advanced-examples","title":"Advanced Examples","text":"<p>For more complex GraphQL examples, see: - GraphQL Queries Example - Use Cases for real-world patterns</p>"},{"location":"building-apis/graphql/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about REST Endpoints for traditional APIs</li> <li>Add Authentication to secure GraphQL</li> <li>Enable Caching for better performance</li> <li>Explore WebSocket for real-time updates</li> </ul>"},{"location":"building-apis/pagination-filtering-sorting/","title":"Pagination, Filtering, and Sorting","text":"<p>Pylight provides built-in pagination, filtering, and sorting for list endpoints, making it easy to handle large datasets efficiently.</p>"},{"location":"building-apis/pagination-filtering-sorting/#overview","title":"Overview","text":"<p>Pylight automatically provides:</p> <ul> <li>Pagination: Page-based navigation with configurable page sizes</li> <li>Filtering: Query-based filtering with multiple operators</li> <li>Sorting: Single or multi-field sorting (ascending/descending)</li> </ul> <p>All features work together seamlessly.</p>"},{"location":"building-apis/pagination-filtering-sorting/#pagination","title":"Pagination","text":""},{"location":"building-apis/pagination-filtering-sorting/#basic-usage","title":"Basic Usage","text":"<pre><code>GET /api/products?page=1&amp;limit=10\n</code></pre> <p>Response:</p> <pre><code>{\n  \"items\": [\n    {\"id\": 1, \"name\": \"Product 1\"},\n    {\"id\": 2, \"name\": \"Product 2\"}\n  ],\n  \"total\": 100,\n  \"page\": 1,\n  \"limit\": 10,\n  \"pages\": 10\n}\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#configuration","title":"Configuration","text":"<p>Configure pagination in YAML:</p> <pre><code>tables:\n  - name: \"products\"\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 20\n        max_page_size: 200\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/features_config.yaml</code></p>"},{"location":"building-apis/pagination-filtering-sorting/#query-parameters","title":"Query Parameters","text":"<ul> <li><code>page</code>: Page number (default: 1)</li> <li><code>limit</code>: Items per page (default: 10, max: configured max_page_size)</li> </ul>"},{"location":"building-apis/pagination-filtering-sorting/#response-fields","title":"Response Fields","text":"<ul> <li><code>items</code>: Array of items for current page</li> <li><code>total</code>: Total number of items</li> <li><code>page</code>: Current page number</li> <li><code>limit</code>: Items per page</li> <li><code>pages</code>: Total number of pages</li> </ul>"},{"location":"building-apis/pagination-filtering-sorting/#filtering","title":"Filtering","text":""},{"location":"building-apis/pagination-filtering-sorting/#basic-filtering","title":"Basic Filtering","text":"<p>Filter by field value:</p> <pre><code>GET /api/products?price__gt=100\nGET /api/products?name__eq=Laptop\nGET /api/products?status__in=active,pending\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#filter-operators","title":"Filter Operators","text":"<ul> <li><code>__eq</code>: Equals (<code>price__eq=100</code>)</li> <li><code>__ne</code>: Not equals (<code>status__ne=deleted</code>)</li> <li><code>__gt</code>: Greater than (<code>price__gt=100</code>)</li> <li><code>__gte</code>: Greater than or equal (<code>price__gte=100</code>)</li> <li><code>__lt</code>: Less than (<code>price__lt=1000</code>)</li> <li><code>__lte</code>: Less than or equal (<code>price__lte=1000</code>)</li> <li><code>__like</code>: Pattern matching (<code>name__like=laptop%</code>)</li> <li><code>__in</code>: Value in list (<code>status__in=active,pending</code>)</li> </ul>"},{"location":"building-apis/pagination-filtering-sorting/#multiple-filters","title":"Multiple Filters","text":"<p>Combine multiple filters:</p> <pre><code>GET /api/products?price__gte=50&amp;price__lte=200&amp;status__eq=active\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#configuration_1","title":"Configuration","text":"<p>Enable/disable filtering:</p> <pre><code>tables:\n  - name: \"products\"\n    features:\n      filtering:\n        enabled: true\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#sorting","title":"Sorting","text":""},{"location":"building-apis/pagination-filtering-sorting/#basic-sorting","title":"Basic Sorting","text":"<p>Sort by field:</p> <pre><code>GET /api/products?sort=price\nGET /api/products?sort=-price  # Descending\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#multiple-fields","title":"Multiple Fields","text":"<p>Sort by multiple fields:</p> <pre><code>GET /api/products?sort=category,price\nGET /api/products?sort=category,-price  # Category ascending, price descending\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#configuration_2","title":"Configuration","text":"<p>Enable/disable sorting:</p> <pre><code>tables:\n  - name: \"products\"\n    features:\n      sorting:\n        enabled: true\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#combined-usage","title":"Combined Usage","text":"<p>Combine pagination, filtering, and sorting:</p> <pre><code>GET /api/products?page=2&amp;limit=20&amp;price__gte=100&amp;sort=-price\n</code></pre> <p>This query: - Gets page 2 - 20 items per page - Filters products with price &gt;= 100 - Sorts by price descending</p>"},{"location":"building-apis/pagination-filtering-sorting/#graphql-support","title":"GraphQL Support","text":"<p>All features work with GraphQL:</p> <pre><code>query {\n  products(\n    page: 1\n    limit: 10\n    filter: {price: {gte: 100}}\n    sort: \"-price\"\n  ) {\n    id\n    name\n    price\n  }\n}\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#performance-considerations","title":"Performance Considerations","text":""},{"location":"building-apis/pagination-filtering-sorting/#indexing","title":"Indexing","text":"<p>Ensure database indexes on frequently filtered/sorted fields:</p> <pre><code>CREATE INDEX idx_products_price ON products(price);\nCREATE INDEX idx_products_status ON products(status);\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#large-datasets","title":"Large Datasets","text":"<p>For very large datasets: - Use appropriate page sizes - Index filtered/sorted columns - Consider cursor-based pagination for very large datasets</p>"},{"location":"building-apis/pagination-filtering-sorting/#configuration-examples","title":"Configuration Examples","text":""},{"location":"building-apis/pagination-filtering-sorting/#high-traffic-table","title":"High-Traffic Table","text":"<pre><code>tables:\n  - name: \"products\"\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 20\n        max_page_size: 200\n      filtering:\n        enabled: true\n      sorting:\n        enabled: true\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#read-only-table","title":"Read-Only Table","text":"<pre><code>tables:\n  - name: \"readonly_data\"\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 5\n        max_page_size: 50\n      filtering:\n        enabled: false\n      sorting:\n        enabled: false\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#search-table","title":"Search Table","text":"<pre><code>tables:\n  - name: \"search_results\"\n    features:\n      pagination:\n        enabled: false  # No pagination for search\n      filtering:\n        enabled: true   # Advanced filtering\n      sorting:\n        enabled: true   # Sort by relevance\n</code></pre>"},{"location":"building-apis/pagination-filtering-sorting/#best-practices","title":"Best Practices","text":"<ol> <li>Set Appropriate Page Sizes: Balance performance with user experience</li> <li>Index Filtered Fields: Ensure database indexes on filtered columns</li> <li>Limit Max Page Size: Prevent excessive data transfer</li> <li>Use Filtering Wisely: Avoid filtering on unindexed fields</li> <li>Combine Features: Use pagination + filtering + sorting together</li> </ol>"},{"location":"building-apis/pagination-filtering-sorting/#examples","title":"Examples","text":"<p>For complete examples, see: - Features Config Example - REST Endpoints for REST API examples - GraphQL for GraphQL examples</p>"},{"location":"building-apis/pagination-filtering-sorting/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Caching for performance</li> <li>Explore YAML Configuration for complex setups</li> <li>Check out Use Cases for real-world patterns</li> </ul>"},{"location":"building-apis/plugins/","title":"Plugins","text":"<p>Pylight's plugin system allows you to extend framework functionality with custom code, enabling advanced customization and integration with external systems.</p>"},{"location":"building-apis/plugins/#overview","title":"Overview","text":"<p>Plugins provide:</p> <ul> <li>Custom Functionality: Add features beyond core framework</li> <li>Integration Points: Integrate with external services</li> <li>Reusable Components: Share functionality across projects</li> <li>Lifecycle Hooks: Initialize and register custom code</li> </ul>"},{"location":"building-apis/plugins/#basic-plugin-structure","title":"Basic Plugin Structure","text":"<p>A plugin is a class that implements the <code>Plugin</code> interface:</p> <pre><code>from pylight.domain.plugins.interface import Plugin\nfrom pylight.presentation.app import LightApi\n\nclass MyPlugin(Plugin):\n    def initialize(self, app: LightApi):\n        \"\"\"Initialize plugin with app instance.\"\"\"\n        pass\n\n    def register(self, app: LightApi):\n        \"\"\"Register routes, middleware, or other functionality.\"\"\"\n        pass\n</code></pre>"},{"location":"building-apis/plugins/#plugin-lifecycle","title":"Plugin Lifecycle","text":"<ol> <li>Initialization: <code>initialize()</code> is called when the app starts</li> <li>Registration: <code>register()</code> is called after models are registered</li> <li>Execution: Plugin functionality is available during request handling</li> </ol>"},{"location":"building-apis/plugins/#example-custom-route-plugin","title":"Example: Custom Route Plugin","text":"<p>Add custom routes:</p> <pre><code>from pylight.domain.plugins.interface import Plugin\nfrom pylight.presentation.app import LightApi\nfrom starlette.routing import Route\nfrom starlette.responses import JSONResponse\n\nclass HealthCheckPlugin(Plugin):\n    def initialize(self, app: LightApi):\n        \"\"\"Initialize health check plugin.\"\"\"\n        self.app = app\n\n    def register(self, app: LightApi):\n        \"\"\"Register health check route.\"\"\"\n        async def health_check(request):\n            return JSONResponse({\"status\": \"healthy\"})\n\n        app.starletteApp.routes.append(\n            Route(\"/health\", health_check, methods=[\"GET\"])\n        )\n</code></pre>"},{"location":"building-apis/plugins/#example-middleware-plugin","title":"Example: Middleware Plugin","text":"<p>Add custom middleware:</p> <pre><code>from pylight.domain.plugins.interface import Plugin\nfrom pylight.presentation.app import LightApi\nfrom starlette.middleware.base import BaseHTTPMiddleware\n\nclass LoggingPlugin(Plugin):\n    def initialize(self, app: LightApi):\n        \"\"\"Initialize logging plugin.\"\"\"\n        self.app = app\n\n    def register(self, app: LightApi):\n        \"\"\"Register logging middleware.\"\"\"\n        class LoggingMiddleware(BaseHTTPMiddleware):\n            async def dispatch(self, request, call_next):\n                print(f\"Request: {request.method} {request.url}\")\n                response = await call_next(request)\n                print(f\"Response: {response.status_code}\")\n                return response\n\n        app.starletteApp.middleware_stack = LoggingMiddleware(app.starletteApp)\n</code></pre>"},{"location":"building-apis/plugins/#registering-plugins","title":"Registering Plugins","text":""},{"location":"building-apis/plugins/#programmatic-registration","title":"Programmatic Registration","text":"<pre><code>from pylight.presentation.app import LightApi\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.registerPlugin(HealthCheckPlugin)\napp.registerPlugin(LoggingPlugin)\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"building-apis/plugins/#multiple-plugins","title":"Multiple Plugins","text":"<pre><code>app.registerPlugin(HealthCheckPlugin)\napp.registerPlugin(LoggingPlugin)\napp.registerPlugin(CustomAuthPlugin)\n</code></pre>"},{"location":"building-apis/plugins/#plugin-examples","title":"Plugin Examples","text":""},{"location":"building-apis/plugins/#metrics-plugin","title":"Metrics Plugin","text":"<p>Collect API metrics:</p> <pre><code>from pylight.domain.plugins.interface import Plugin\nfrom pylight.presentation.app import LightApi\nfrom starlette.routing import Route\nfrom starlette.responses import JSONResponse\n\nclass MetricsPlugin(Plugin):\n    def __init__(self):\n        self.request_count = 0\n        self.error_count = 0\n\n    def initialize(self, app: LightApi):\n        self.app = app\n\n    def register(self, app: LightApi):\n        # Add metrics endpoint\n        async def metrics(request):\n            return JSONResponse({\n                \"requests\": self.request_count,\n                \"errors\": self.error_count\n            })\n\n        app.starletteApp.routes.append(\n            Route(\"/metrics\", metrics, methods=[\"GET\"])\n        )\n\n        # Add middleware to track metrics\n        # (Implementation details omitted)\n</code></pre>"},{"location":"building-apis/plugins/#external-service-integration","title":"External Service Integration","text":"<p>Integrate with external services:</p> <pre><code>class ExternalServicePlugin(Plugin):\n    def initialize(self, app: LightApi):\n        # Initialize external service client\n        self.client = ExternalServiceClient()\n\n    def register(self, app: LightApi):\n        # Register routes that use external service\n        async def external_data(request):\n            data = await self.client.fetch_data()\n            return JSONResponse(data)\n\n        app.starletteApp.routes.append(\n            Route(\"/external\", external_data, methods=[\"GET\"])\n        )\n</code></pre>"},{"location":"building-apis/plugins/#best-practices","title":"Best Practices","text":"<ol> <li>Single Responsibility: Each plugin should have one clear purpose</li> <li>Idempotent: Plugins should be safe to register multiple times</li> <li>Documentation: Document plugin behavior and configuration</li> <li>Error Handling: Handle errors gracefully</li> <li>Testing: Test plugins in isolation</li> </ol>"},{"location":"building-apis/plugins/#plugin-registry","title":"Plugin Registry","text":"<p>Pylight maintains a plugin registry that:</p> <ul> <li>Tracks Plugins: Keeps list of registered plugins</li> <li>Initializes Plugins: Calls <code>initialize()</code> on all plugins</li> <li>Registers Plugins: Calls <code>register()</code> after model registration</li> </ul>"},{"location":"building-apis/plugins/#advanced-usage","title":"Advanced Usage","text":""},{"location":"building-apis/plugins/#plugin-configuration","title":"Plugin Configuration","text":"<p>Pass configuration to plugins:</p> <pre><code>class ConfigurablePlugin(Plugin):\n    def __init__(self, config: dict):\n        self.config = config\n\n    def initialize(self, app: LightApi):\n        # Use self.config\n        pass\n</code></pre>"},{"location":"building-apis/plugins/#plugin-dependencies","title":"Plugin Dependencies","text":"<p>Plugins can depend on other plugins:</p> <pre><code>class DependentPlugin(Plugin):\n    def initialize(self, app: LightApi):\n        # Access other plugins via app.pluginRegistry\n        pass\n</code></pre>"},{"location":"building-apis/plugins/#troubleshooting","title":"Troubleshooting","text":""},{"location":"building-apis/plugins/#plugin-not-executing","title":"Plugin Not Executing","text":"<p>Ensure plugin is registered before <code>app.run()</code>:</p> <pre><code>app.registerPlugin(MyPlugin)  # Before app.run()\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"building-apis/plugins/#plugin-errors","title":"Plugin Errors","text":"<p>Check plugin initialization and registration:</p> <pre><code>try:\n    plugin.initialize(app)\n    plugin.register(app)\nexcept Exception as e:\n    print(f\"Plugin error: {e}\")\n</code></pre>"},{"location":"building-apis/plugins/#examples","title":"Examples","text":"<p>For complete plugin examples, see: - Plugin Examples - Use Cases for real-world patterns</p>"},{"location":"building-apis/plugins/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Customization for advanced customization</li> <li>Explore Middleware for request/response handling</li> <li>Check out Use Cases for real-world examples</li> </ul>"},{"location":"building-apis/rest-endpoints/","title":"REST Endpoints","text":"<p>Pylight automatically generates REST endpoints (GET, POST, PUT, DELETE) for your models. This guide covers everything you need to know about REST endpoints in Pylight.</p>"},{"location":"building-apis/rest-endpoints/#overview","title":"Overview","text":"<p>When you register a model with Pylight, it automatically creates REST endpoints for all CRUD operations:</p> <ul> <li><code>GET /api/{table_name}</code> - List all items (with pagination, filtering, sorting)</li> <li><code>GET /api/{table_name}/{id}</code> - Get a specific item</li> <li><code>POST /api/{table_name}</code> - Create a new item</li> <li><code>PUT /api/{table_name}/{id}</code> - Update an item</li> <li><code>DELETE /api/{table_name}/{id}</code> - Delete an item</li> </ul>"},{"location":"building-apis/rest-endpoints/#basic-example","title":"Basic Example","text":"<p>Define a model and register it:</p> <pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre> <p>View source: <code>docs/examples/basic_usage.py</code></p> <p>This automatically creates all REST endpoints for the <code>products</code> table.</p>"},{"location":"building-apis/rest-endpoints/#list-endpoints-get-apitable_name","title":"List Endpoints (GET /api/{table_name})","text":"<p>List all items with optional pagination, filtering, and sorting.</p>"},{"location":"building-apis/rest-endpoints/#basic-list","title":"Basic List","text":"<pre><code>GET /api/products\n</code></pre> <p>Response:</p> <pre><code>{\n  \"items\": [\n    {\"id\": 1, \"name\": \"Laptop\", \"price\": 999},\n    {\"id\": 2, \"name\": \"Mouse\", \"price\": 29}\n  ],\n  \"total\": 2,\n  \"page\": 1,\n  \"limit\": 10\n}\n</code></pre>"},{"location":"building-apis/rest-endpoints/#pagination","title":"Pagination","text":"<pre><code>GET /api/products?page=1&amp;limit=10\n</code></pre> <p>Query Parameters: - <code>page</code>: Page number (default: 1) - <code>limit</code>: Items per page (default: 10, max: 100)</p>"},{"location":"building-apis/rest-endpoints/#filtering","title":"Filtering","text":"<p>Filter by field values:</p> <pre><code>GET /api/products?price__gt=100\nGET /api/products?name__like=laptop\nGET /api/products?price__gte=50&amp;price__lte=200\n</code></pre> <p>Filter Operators: - <code>__eq</code>: Equals - <code>__ne</code>: Not equals - <code>__gt</code>: Greater than - <code>__gte</code>: Greater than or equal - <code>__lt</code>: Less than - <code>__lte</code>: Less than or equal - <code>__like</code>: Pattern matching (SQL LIKE) - <code>__in</code>: Value in list</p>"},{"location":"building-apis/rest-endpoints/#sorting","title":"Sorting","text":"<pre><code>GET /api/products?sort=price\nGET /api/products?sort=-price\nGET /api/products?sort=name,price\n</code></pre> <ul> <li>Prefix with <code>-</code> for descending order</li> <li>Multiple fields: comma-separated</li> </ul>"},{"location":"building-apis/rest-endpoints/#combined-query","title":"Combined Query","text":"<pre><code>GET /api/products?page=1&amp;limit=20&amp;price__gt=100&amp;sort=-price\n</code></pre>"},{"location":"building-apis/rest-endpoints/#get-single-item-get-apitable_nameid","title":"Get Single Item (GET /api/{table_name}/{id})","text":"<p>Retrieve a specific item by ID:</p> <pre><code>GET /api/products/1\n</code></pre> <p>Response:</p> <pre><code>{\n  \"id\": 1,\n  \"name\": \"Laptop\",\n  \"price\": 999\n}\n</code></pre>"},{"location":"building-apis/rest-endpoints/#create-item-post-apitable_name","title":"Create Item (POST /api/{table_name})","text":"<p>Create a new item:</p> <pre><code>POST /api/products\nContent-Type: application/json\n\n{\n  \"name\": \"Keyboard\",\n  \"price\": 79\n}\n</code></pre> <p>Response (201 Created):</p> <pre><code>{\n  \"id\": 3,\n  \"name\": \"Keyboard\",\n  \"price\": 79\n}\n</code></pre> <p>View source: <code>docs/examples/rest_endpoints.py</code></p>"},{"location":"building-apis/rest-endpoints/#update-item-put-apitable_nameid","title":"Update Item (PUT /api/{table_name}/{id})","text":"<p>Update an existing item:</p> <pre><code>PUT /api/products/1\nContent-Type: application/json\n\n{\n  \"name\": \"Updated Laptop\",\n  \"price\": 1099\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"id\": 1,\n  \"name\": \"Updated Laptop\",\n  \"price\": 1099\n}\n</code></pre>"},{"location":"building-apis/rest-endpoints/#delete-item-delete-apitable_nameid","title":"Delete Item (DELETE /api/{table_name}/{id})","text":"<p>Delete an item:</p> <pre><code>DELETE /api/products/1\n</code></pre> <p>Response: 200 OK or 204 No Content</p>"},{"location":"building-apis/rest-endpoints/#response-formats","title":"Response Formats","text":""},{"location":"building-apis/rest-endpoints/#success-responses","title":"Success Responses","text":"<ul> <li>200 OK: Successful GET, PUT, DELETE</li> <li>201 Created: Successful POST</li> <li>204 No Content: Successful DELETE (some implementations)</li> </ul>"},{"location":"building-apis/rest-endpoints/#error-responses","title":"Error Responses","text":"<ul> <li>400 Bad Request: Invalid request data</li> <li>404 Not Found: Resource not found</li> <li>500 Internal Server Error: Server error</li> </ul> <p>Error response format:</p> <pre><code>{\n  \"error\": \"Error message\",\n  \"detail\": \"Additional error details\"\n}\n</code></pre>"},{"location":"building-apis/rest-endpoints/#method-restrictions","title":"Method Restrictions","text":"<p>You can restrict which HTTP methods are available for a model:</p> <pre><code>class Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n\n    class Configuration:\n        # Only allow GET and POST\n        allowed_methods = [\"GET\", \"POST\"]\n</code></pre> <p>Or via YAML configuration:</p> <pre><code>tables:\n  - name: products\n    methods: [\"GET\", \"POST\"]\n</code></pre>"},{"location":"building-apis/rest-endpoints/#authentication","title":"Authentication","text":"<p>To require authentication for REST endpoints, see Authentication.</p>"},{"location":"building-apis/rest-endpoints/#caching","title":"Caching","text":"<p>To enable caching for GET requests, see Caching.</p>"},{"location":"building-apis/rest-endpoints/#advanced-examples","title":"Advanced Examples","text":"<p>For more complex REST endpoint examples, see: - REST Endpoints Example - Use Cases for real-world patterns</p>"},{"location":"building-apis/rest-endpoints/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about GraphQL for flexible queries</li> <li>Add Authentication to secure endpoints</li> <li>Enable Caching for better performance</li> <li>Configure via YAML Configuration</li> </ul>"},{"location":"building-apis/websocket/","title":"WebSocket","text":"<p>Pylight automatically generates WebSocket endpoints for real-time communication with your models.</p>"},{"location":"building-apis/websocket/#overview","title":"Overview","text":"<p>When you register a model, Pylight automatically creates:</p> <ul> <li>WebSocket Endpoint: Available at <code>/ws/{table_name}</code></li> <li>Real-time Updates: Automatic notifications on create, update, delete</li> <li>Subscription Model: Subscribe to specific resources or events</li> </ul>"},{"location":"building-apis/websocket/#basic-example","title":"Basic Example","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre> <p>This automatically creates a WebSocket endpoint at <code>/ws/products</code>.</p>"},{"location":"building-apis/websocket/#websocket-connection","title":"WebSocket Connection","text":"<p>Connect to the WebSocket endpoint:</p> <pre><code>const ws = new WebSocket('ws://localhost:8000/ws/products');\n</code></pre> <p>Or using Python:</p> <pre><code>import asyncio\nimport websockets\n\nasync def connect():\n    uri = \"ws://localhost:8000/ws/products\"\n    async with websockets.connect(uri) as websocket:\n        # Send message\n        await websocket.send('{\"action\": \"subscribe\", \"resource\": \"products\"}')\n\n        # Receive messages\n        message = await websocket.recv()\n        print(f\"Received: {message}\")\n\nasyncio.run(connect())\n</code></pre>"},{"location":"building-apis/websocket/#custom-websocket-handlers","title":"Custom WebSocket Handlers","text":"<p>You can customize WebSocket behavior by extending the base <code>WebSocketHandler</code> class and overriding async lifecycle methods, similar to how you customize authentication or caching.</p>"},{"location":"building-apis/websocket/#creating-a-custom-handler","title":"Creating a Custom Handler","text":"<pre><code>from pylight.infrastructure.websocket.base import WebSocketHandler\nfrom starlette.websockets import WebSocket\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom typing import Type\nimport json\n\nclass CustomProductHandler(WebSocketHandler):\n    \"\"\"Custom WebSocket handler for Product model.\"\"\"\n\n    async def on_connect(\n        self, \n        websocket: WebSocket, \n        model: Type[RestEndpoint]\n    ) -&gt; None:\n        \"\"\"Handle connection - send welcome message.\"\"\"\n        await self.send(websocket, {\"type\": \"connected\", \"message\": \"Welcome!\"})\n\n    async def on_message(\n        self, \n        websocket: WebSocket, \n        model: Type[RestEndpoint], \n        message: str\n    ) -&gt; None:\n        \"\"\"Handle incoming messages.\"\"\"\n        try:\n            data = json.loads(message)\n            action = data.get(\"action\")\n\n            if action == \"subscribe\":\n                await self.send(websocket, {\"status\": \"subscribed\"})\n                return\n\n            if action == \"ping\":\n                await self.send(websocket, {\"action\": \"pong\"})\n                return\n        except json.JSONDecodeError:\n            await self.send(websocket, {\"error\": \"Invalid JSON\"})\n\n    async def on_disconnect(\n        self, \n        websocket: WebSocket, \n        model: Type[RestEndpoint]\n    ) -&gt; None:\n        \"\"\"Handle disconnection.\"\"\"\n        print(\"Client disconnected\")\n</code></pre>"},{"location":"building-apis/websocket/#configuring-custom-handler","title":"Configuring Custom Handler","text":"<p>Configure your custom handler via the model's Configuration class:</p> <pre><code>class Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\n    class Configuration:\n        websocket_class = CustomProductHandler\n</code></pre> <p>The framework automatically uses your custom handler for WebSocket connections to <code>/ws/products</code>.</p>"},{"location":"building-apis/websocket/#subscription","title":"Subscription","text":"<p>Subscribe to receive updates:</p> <pre><code>{\n  \"action\": \"subscribe\",\n  \"resource\": \"products\"\n}\n</code></pre>"},{"location":"building-apis/websocket/#message-types","title":"Message Types","text":""},{"location":"building-apis/websocket/#create-event","title":"Create Event","text":"<p>When a new item is created:</p> <pre><code>{\n  \"event\": \"created\",\n  \"resource\": \"products\",\n  \"data\": {\n    \"id\": 1,\n    \"name\": \"Laptop\",\n    \"price\": 999\n  }\n}\n</code></pre>"},{"location":"building-apis/websocket/#update-event","title":"Update Event","text":"<p>When an item is updated:</p> <pre><code>{\n  \"event\": \"updated\",\n  \"resource\": \"products\",\n  \"data\": {\n    \"id\": 1,\n    \"name\": \"Updated Laptop\",\n    \"price\": 1099\n  }\n}\n</code></pre>"},{"location":"building-apis/websocket/#delete-event","title":"Delete Event","text":"<p>When an item is deleted:</p> <pre><code>{\n  \"event\": \"deleted\",\n  \"resource\": \"products\",\n  \"data\": {\n    \"id\": 1\n  }\n}\n</code></pre>"},{"location":"building-apis/websocket/#client-example","title":"Client Example","text":"<p>Complete WebSocket client example:</p> <pre><code>import asyncio\nimport websockets\nimport json\n\nasync def websocket_client():\n    uri = \"ws://localhost:8000/ws/products\"\n\n    async with websockets.connect(uri) as websocket:\n        # Send message\n        subscribe = {\n            \"action\": \"subscribe\",\n            \"resource\": \"products\"\n        }\n        await websocket.send(json.dumps(subscribe))\n\n        # Listen for messages\n        while True:\n            message = await websocket.recv()\n            data = json.loads(message)\n            print(f\"Received: {data}\")\n\nasyncio.run(websocket_client())\n</code></pre>"},{"location":"building-apis/websocket/#helper-methods","title":"Helper Methods","text":"<p>The base <code>WebSocketHandler</code> class provides a <code>send()</code> helper method for sending messages:</p> <pre><code>class MyHandler(WebSocketHandler):\n    async def on_message(self, websocket, model, message):\n        # Send string\n        await self.send(websocket, \"Hello, client!\")\n\n        # Send dict (auto-converted to JSON)\n        await self.send(websocket, {\"type\": \"notification\", \"message\": \"Update available\"})\n</code></pre> <p>The helper method automatically converts dicts to JSON and handles errors gracefully.</p> <p>View source: <code>docs/examples/websocket_hooks.py</code></p>"},{"location":"building-apis/websocket/#multiple-connections","title":"Multiple Connections","text":"<p>Multiple clients can connect simultaneously:</p> <pre><code>async def multiple_clients():\n    uri = \"ws://localhost:8000/ws/products\"\n\n    # Connect multiple clients\n    async with websockets.connect(uri) as ws1, \\\n              websockets.connect(uri) as ws2:\n\n        # Both subscribe\n        await ws1.send(json.dumps({\"action\": \"subscribe\", \"resource\": \"products\"}))\n        await ws2.send(json.dumps({\"action\": \"subscribe\", \"resource\": \"products\"}))\n\n        # Both receive updates\n        msg1 = await ws1.recv()\n        msg2 = await ws2.recv()\n</code></pre>"},{"location":"building-apis/websocket/#authentication","title":"Authentication","text":"<p>To require authentication for WebSocket connections, see Authentication.</p>"},{"location":"building-apis/websocket/#use-cases","title":"Use Cases","text":"<p>WebSocket is ideal for:</p> <ul> <li>Real-time Dashboards: Live updates for monitoring</li> <li>Collaborative Applications: Multiple users editing simultaneously</li> <li>Notifications: Push updates to clients</li> <li>Live Data Feeds: Streaming data updates</li> </ul>"},{"location":"building-apis/websocket/#advanced-examples","title":"Advanced Examples","text":"<p>For more complex WebSocket examples, see: - WebSocket Hooks Example - Use Cases for real-world patterns</p>"},{"location":"building-apis/websocket/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about REST Endpoints for traditional APIs</li> <li>Explore GraphQL for flexible queries</li> <li>Add Authentication to secure WebSocket connections</li> <li>Check out Use Cases for real-time API examples</li> </ul>"},{"location":"building-apis/yaml-configuration/","title":"YAML Configuration","text":"<p>Pylight supports YAML-based configuration for defining your entire API structure, including database connections, table configurations, authentication, permissions, and features.</p>"},{"location":"building-apis/yaml-configuration/#overview","title":"Overview","text":"<p>YAML configuration allows you to:</p> <ul> <li>Define API Structure: Configure all tables and endpoints in one file</li> <li>Database Reflection: Automatically generate models from existing databases</li> <li>Feature Configuration: Enable/disable and configure features per table</li> <li>Authentication Setup: Configure JWT/OAuth2 and permissions</li> <li>Start from YAML: Launch Pylight directly from a YAML file</li> </ul>"},{"location":"building-apis/yaml-configuration/#basic-example","title":"Basic Example","text":"<p>Minimal YAML configuration:</p> <pre><code>database:\n  url: \"postgresql://postgres:postgres@localhost:5432/pylight\"\n\nswagger:\n  title: \"Pylight API\"\n  version: \"1.0.0\"\n\ntables:\n  - name: \"products\"\n  - name: \"users\"\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/basic_config.yaml</code></p>"},{"location":"building-apis/yaml-configuration/#starting-from-yaml","title":"Starting from YAML","text":"<p>Start Pylight with a YAML configuration:</p> <pre><code>pylight start --config config.yaml\n</code></pre> <p>Or programmatically:</p> <pre><code>from pylight.presentation.app import LightApi\n\napp = LightApi.fromYamlConfig(\"config.yaml\")\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"building-apis/yaml-configuration/#configuration-structure","title":"Configuration Structure","text":""},{"location":"building-apis/yaml-configuration/#database-configuration","title":"Database Configuration","text":"<pre><code>database:\n  url: \"postgresql://user:password@host:port/database\"\n</code></pre> <p>Supported databases: - PostgreSQL: <code>postgresql://...</code> - MySQL: <code>mysql://...</code> - SQLite: <code>sqlite:///path/to/db.db</code></p> <p>Note: For async mode (default), PostgreSQL URLs are automatically converted to <code>postgresql+asyncpg://</code> format.</p>"},{"location":"building-apis/yaml-configuration/#swagger-configuration","title":"Swagger Configuration","text":"<pre><code>swagger:\n  title: \"My API\"\n  version: \"1.0.0\"\n  description: \"API description\"\n</code></pre>"},{"location":"building-apis/yaml-configuration/#table-configuration","title":"Table Configuration","text":"<pre><code>tables:\n  - name: \"products\"\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\"]\n    authentication:\n      required: true\n    permissions:\n      GET: []\n      POST: [\"admin\"]\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 20\n      caching:\n        enabled: true\n</code></pre>"},{"location":"building-apis/yaml-configuration/#complete-configuration-example","title":"Complete Configuration Example","text":"<pre><code>database:\n  url: \"postgresql://postgres:postgres@localhost:5432/pylight\"\n\nswagger:\n  title: \"Pylight API\"\n  version: \"1.0.0\"\n  description: \"Complete API configuration example\"\n\nauthentication:\n  jwt:\n    secret_key: \"your-secret-key\"\n\ntables:\n  - name: \"products\"\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\"]\n    authentication:\n      required: true\n    permissions:\n      GET: []\n      POST: [\"admin\"]\n      PUT: [\"admin\"]\n      DELETE: [\"admin\"]\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 20\n        max_page_size: 200\n      filtering:\n        enabled: true\n      sorting:\n        enabled: true\n      caching:\n        enabled: true\n      graphql: true\n      websocket: true\n\n  - name: \"users\"\n    methods: [\"GET\", \"POST\"]\n    authentication:\n      required: false\n    features:\n      pagination:\n        enabled: true\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/features_config.yaml</code></p>"},{"location":"building-apis/yaml-configuration/#feature-configuration","title":"Feature Configuration","text":""},{"location":"building-apis/yaml-configuration/#pagination","title":"Pagination","text":"<pre><code>features:\n  pagination:\n    enabled: true\n    default_page_size: 20\n    max_page_size: 200\n</code></pre>"},{"location":"building-apis/yaml-configuration/#filtering","title":"Filtering","text":"<pre><code>features:\n  filtering:\n    enabled: true\n</code></pre>"},{"location":"building-apis/yaml-configuration/#sorting","title":"Sorting","text":"<pre><code>features:\n  sorting:\n    enabled: true\n</code></pre>"},{"location":"building-apis/yaml-configuration/#caching","title":"Caching","text":"<pre><code>features:\n  caching:\n    enabled: true\n</code></pre>"},{"location":"building-apis/yaml-configuration/#graphql","title":"GraphQL","text":"<pre><code>features:\n  graphql: true  # or false\n</code></pre>"},{"location":"building-apis/yaml-configuration/#websocket","title":"WebSocket","text":"<pre><code>features:\n  websocket: true  # or false\n</code></pre>"},{"location":"building-apis/yaml-configuration/#authentication-configuration","title":"Authentication Configuration","text":""},{"location":"building-apis/yaml-configuration/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>authentication:\n  jwt:\n    secret_key: \"your-secret-key\"\n\ntables:\n  - name: \"products\"\n    authentication:\n      required: true\n    permissions:\n      GET: []\n      POST: [\"admin\"]\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/auth_config.yaml</code></p>"},{"location":"building-apis/yaml-configuration/#oauth2-authentication","title":"OAuth2 Authentication","text":"<pre><code>authentication:\n  oauth2:\n    client_id: \"your-client-id\"\n    client_secret: \"your-client-secret\"\n    authorization_url: \"https://oauth-provider.com/authorize\"\n    token_url: \"https://oauth-provider.com/token\"\n</code></pre>"},{"location":"building-apis/yaml-configuration/#permissions","title":"Permissions","text":"<p>Configure role-based access control:</p> <pre><code>tables:\n  - name: \"products\"\n    permissions:\n      GET: []              # Any authenticated user\n      POST: [\"admin\"]      # Only admin role\n      PUT: [\"admin\", \"editor\"]  # Admin or editor\n      DELETE: [\"admin\"]    # Only admin\n</code></pre>"},{"location":"building-apis/yaml-configuration/#method-restrictions","title":"Method Restrictions","text":"<p>Limit which HTTP methods are available:</p> <pre><code>tables:\n  - name: \"readonly_data\"\n    methods: [\"GET\"]  # Only GET, no POST/PUT/DELETE\n</code></pre>"},{"location":"building-apis/yaml-configuration/#validation","title":"Validation","text":"<p>YAML configuration is validated on load:</p> <ul> <li>Structure Validation: Ensures required fields are present</li> <li>Type Validation: Validates field types</li> <li>Value Validation: Validates field values</li> <li>Database Validation: Verifies tables exist in database</li> <li>Error Messages: Detailed error messages with field paths and suggestions</li> </ul> <p>Example error message:</p> <pre><code>Validation error in tables[0].features.pagination.default_page_size: \nfield 'default_page_size' must be a positive integer, got str. \nSuggestion: Set a positive integer for default page size.\n</code></pre>"},{"location":"building-apis/yaml-configuration/#database-reflection","title":"Database Reflection","text":"<p>YAML configuration automatically reflects database schemas:</p> <ol> <li>Load YAML: Configuration is loaded and validated</li> <li>Connect to Database: Connection is established</li> <li>Reflect Tables: Table schemas are reflected from database</li> <li>Generate Models: Models are generated dynamically</li> <li>Register Endpoints: Endpoints are registered with the app</li> </ol>"},{"location":"building-apis/yaml-configuration/#best-practices","title":"Best Practices","text":"<ol> <li>Use Environment Variables: Store sensitive data (secrets, passwords) in environment variables</li> <li>Version Control: Keep YAML files in version control (excluding secrets)</li> <li>Validate Early: Validate configuration before deployment</li> <li>Document Configuration: Add comments to explain complex configurations</li> <li>Use Defaults: Leverage default values to keep configuration minimal</li> </ol>"},{"location":"building-apis/yaml-configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"building-apis/yaml-configuration/#invalid-yaml-syntax","title":"Invalid YAML Syntax","text":"<p>Check YAML syntax:</p> <pre><code>python -c \"import yaml; yaml.safe_load(open('config.yaml'))\"\n</code></pre>"},{"location":"building-apis/yaml-configuration/#database-connection-errors","title":"Database Connection Errors","text":"<p>Verify database URL format and credentials:</p> <pre><code>database:\n  url: \"postgresql://user:password@host:port/database\"\n</code></pre>"},{"location":"building-apis/yaml-configuration/#table-not-found","title":"Table Not Found","text":"<p>Ensure tables exist in database:</p> <pre><code>psql -U postgres -d pylight -c \"\\dt\"\n</code></pre>"},{"location":"building-apis/yaml-configuration/#examples","title":"Examples","text":"<p>For complete YAML configuration examples, see: - Basic Config - Features Config - Auth Config</p>"},{"location":"building-apis/yaml-configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Database Reflection for existing databases</li> <li>Explore Authentication for security</li> <li>Check out Use Cases for real-world examples</li> </ul>"},{"location":"customization/","title":"Customization","text":"<p>This section covers advanced customization options for Pylight, allowing you to extend and customize the framework for your specific needs.</p>"},{"location":"customization/#overview","title":"Overview","text":"<p>Pylight provides extensive customization options:</p> <ul> <li>Custom Authentication - Create custom authentication providers</li> <li>Custom Caching - Implement custom cache backends</li> <li>Middleware - Add custom middleware for request/response handling</li> <li>Error Handling - Customize error handling and responses</li> <li>Deployment - Production deployment best practices</li> </ul>"},{"location":"customization/#customization-points","title":"Customization Points","text":""},{"location":"customization/#authentication","title":"Authentication","text":"<p>Extend authentication classes to implement custom authentication logic:</p> <pre><code>from pylight.infrastructure.auth.jwt import DefaultJWTAuthentication\n\nclass CustomAuth(DefaultJWTAuthentication):\n    # Custom authentication logic\n    pass\n</code></pre>"},{"location":"customization/#caching","title":"Caching","text":"<p>Implement custom cache backends:</p> <pre><code>from pylight.infrastructure.cache.base import RedisCache\n\nclass CustomCache(RedisCache):\n    # Custom caching logic\n    pass\n</code></pre>"},{"location":"customization/#middleware","title":"Middleware","text":"<p>Add custom middleware for cross-cutting concerns:</p> <pre><code>from starlette.middleware.base import BaseHTTPMiddleware\n\nclass CustomMiddleware(BaseHTTPMiddleware):\n    # Custom middleware logic\n    pass\n</code></pre>"},{"location":"customization/#when-to-customize","title":"When to Customize","text":"<p>Consider customization when:</p> <ul> <li>Standard Features Don't Fit: Your requirements differ from defaults</li> <li>Integration Needed: You need to integrate with external systems</li> <li>Performance Optimization: You need custom performance optimizations</li> <li>Security Requirements: You have specific security requirements</li> </ul>"},{"location":"customization/#best-practices","title":"Best Practices","text":"<ol> <li>Extend, Don't Replace: Extend base classes rather than replacing them</li> <li>Follow Interfaces: Implement required interface methods</li> <li>Test Thoroughly: Test custom implementations thoroughly</li> <li>Document Changes: Document custom behavior and configuration</li> </ol>"},{"location":"customization/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Custom Authentication</li> <li>Explore Middleware for request handling</li> <li>Check out Deployment for production setup</li> </ul>"},{"location":"customization/custom-authentication/","title":"Custom Authentication","text":"<p>Pylight allows you to create custom authentication providers by extending the base authentication classes.</p>"},{"location":"customization/custom-authentication/#overview","title":"Overview","text":"<p>You can customize authentication by:</p> <ul> <li>Extending JWT Authentication: Add custom JWT validation logic</li> <li>Extending OAuth2 Authentication: Customize OAuth2 flow</li> <li>Creating New Providers: Implement completely custom authentication</li> </ul>"},{"location":"customization/custom-authentication/#extending-jwt-authentication","title":"Extending JWT Authentication","text":""},{"location":"customization/custom-authentication/#basic-extension","title":"Basic Extension","text":"<pre><code>from pylight.infrastructure.auth.jwt import DefaultJWTAuthentication\nfrom starlette.requests import Request\nfrom typing import Optional, Any\n\nclass CustomJWTAuthentication(DefaultJWTAuthentication):\n    \"\"\"Custom JWT authentication with additional validation.\"\"\"\n\n    async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]:\n        \"\"\"Authenticate with custom validation.\"\"\"\n        # Call parent authentication\n        user = await super().authenticate(request)\n\n        if user:\n            # Add custom validation\n            if user.get(\"role\") == \"banned\":\n                return None\n\n            # Add custom user data\n            user[\"custom_field\"] = \"custom_value\"\n\n        return user\n</code></pre>"},{"location":"customization/custom-authentication/#using-custom-authentication","title":"Using Custom Authentication","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n\n    class Configuration:\n        authentication_class = CustomJWTAuthentication\n        required_roles = {\n            \"GET\": [],\n            \"POST\": [\"admin\"]\n        }\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"customization/custom-authentication/#extending-oauth2-authentication","title":"Extending OAuth2 Authentication","text":""},{"location":"customization/custom-authentication/#custom-oauth2-provider","title":"Custom OAuth2 Provider","text":"<pre><code>from pylight.infrastructure.auth.oauth2 import DefaultOAuth2Authentication\nfrom starlette.requests import Request\nfrom typing import Optional, Any\n\nclass CustomOAuth2Authentication(DefaultOAuth2Authentication):\n    \"\"\"Custom OAuth2 authentication with additional processing.\"\"\"\n\n    async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]:\n        \"\"\"Authenticate with custom OAuth2 processing.\"\"\"\n        user = await super().authenticate(request)\n\n        if user:\n            # Process user data\n            user[\"provider\"] = \"custom_oauth2\"\n\n        return user\n</code></pre>"},{"location":"customization/custom-authentication/#creating-new-authentication-provider","title":"Creating New Authentication Provider","text":""},{"location":"customization/custom-authentication/#implementing-base-interface","title":"Implementing Base Interface","text":"<pre><code>from pylight.infrastructure.auth.base import Authentication\nfrom starlette.requests import Request\nfrom typing import Optional, Any\n\nclass CustomAuthentication(Authentication):\n    \"\"\"Custom authentication provider.\"\"\"\n\n    def __init__(self, api_key: str):\n        \"\"\"Initialize custom authentication.\"\"\"\n        self.api_key = api_key\n\n    async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]:\n        \"\"\"Authenticate using custom method.\"\"\"\n        api_key = request.headers.get(\"X-API-Key\")\n\n        if api_key == self.api_key:\n            return {\n                \"username\": \"api_user\",\n                \"role\": \"user\"\n            }\n\n        return None\n</code></pre>"},{"location":"customization/custom-authentication/#advanced-examples","title":"Advanced Examples","text":""},{"location":"customization/custom-authentication/#multi-provider-authentication","title":"Multi-Provider Authentication","text":"<p>Support multiple authentication methods:</p> <pre><code>class MultiAuth(Authentication):\n    \"\"\"Support multiple authentication providers.\"\"\"\n\n    def __init__(self):\n        self.jwt_auth = DefaultJWTAuthentication()\n        self.oauth2_auth = DefaultOAuth2Authentication(...)\n\n    async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]:\n        \"\"\"Try multiple authentication methods.\"\"\"\n        # Try JWT first\n        user = await self.jwt_auth.authenticate(request)\n        if user:\n            return user\n\n        # Try OAuth2\n        user = await self.oauth2_auth.authenticate(request)\n        if user:\n            return user\n\n        return None\n</code></pre>"},{"location":"customization/custom-authentication/#token-refresh","title":"Token Refresh","text":"<p>Implement token refresh logic:</p> <pre><code>class JWTAuthWithRefresh(DefaultJWTAuthentication):\n    \"\"\"JWT authentication with refresh token support.\"\"\"\n\n    async def authenticate(self, request: Request) -&gt; Optional[dict[str, Any]]:\n        \"\"\"Authenticate with refresh token support.\"\"\"\n        user = await super().authenticate(request)\n\n        if not user:\n            # Try refresh token\n            refresh_token = request.headers.get(\"X-Refresh-Token\")\n            if refresh_token:\n                # Validate and refresh\n                user = await self.refresh_token(refresh_token)\n\n        return user\n\n    async def refresh_token(self, refresh_token: str) -&gt; Optional[dict[str, Any]]:\n        \"\"\"Refresh access token.\"\"\"\n        # Implementation\n        pass\n</code></pre>"},{"location":"customization/custom-authentication/#best-practices","title":"Best Practices","text":"<ol> <li>Extend Base Classes: Extend existing classes when possible</li> <li>Handle Errors: Gracefully handle authentication failures</li> <li>Validate Input: Always validate authentication tokens/credentials</li> <li>Log Security Events: Log authentication attempts and failures</li> <li>Test Thoroughly: Test all authentication paths</li> </ol>"},{"location":"customization/custom-authentication/#examples","title":"Examples","text":"<p>For complete authentication examples, see: - Authentication Documentation - Use Cases</p>"},{"location":"customization/custom-authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Custom Caching</li> <li>Explore Middleware for request handling</li> <li>Check out Error Handling for error customization</li> </ul>"},{"location":"customization/custom-caching/","title":"Custom Caching","text":"<p>Pylight allows you to implement custom cache backends by extending the base cache classes.</p>"},{"location":"customization/custom-caching/#overview","title":"Overview","text":"<p>You can customize caching by:</p> <ul> <li>Extending Redis Cache: Add custom caching logic</li> <li>Creating New Backends: Implement completely custom cache backends</li> <li>Custom Cache Strategies: Implement custom cache invalidation strategies</li> </ul>"},{"location":"customization/custom-caching/#extending-redis-cache","title":"Extending Redis Cache","text":""},{"location":"customization/custom-caching/#basic-extension","title":"Basic Extension","text":"<pre><code>from pylight.infrastructure.cache.redis import DefaultRedisCache\nfrom typing import Any, Optional\n\nclass CustomRedisCache(DefaultRedisCache):\n    \"\"\"Custom Redis cache with additional features.\"\"\"\n\n    async def get(self, key: str) -&gt; Optional[Any]:\n        \"\"\"Get with custom processing.\"\"\"\n        value = await super().get(key)\n        if value:\n            # Custom processing\n            return self.process_value(value)\n        return None\n\n    def process_value(self, value: Any) -&gt; Any:\n        \"\"\"Process cached value.\"\"\"\n        # Custom processing logic\n        return value\n</code></pre>"},{"location":"customization/custom-caching/#creating-new-cache-backend","title":"Creating New Cache Backend","text":""},{"location":"customization/custom-caching/#implementing-base-interface","title":"Implementing Base Interface","text":"<pre><code>from pylight.infrastructure.cache.base import Cache\nfrom typing import Any, Optional\n\nclass MemoryCache(Cache):\n    \"\"\"In-memory cache implementation.\"\"\"\n\n    def __init__(self):\n        self.cache: dict[str, Any] = {}\n\n    async def get(self, key: str) -&gt; Optional[Any]:\n        \"\"\"Get value from cache.\"\"\"\n        return self.cache.get(key)\n\n    async def set(self, key: str, value: Any, expirationSeconds: Optional[int] = None) -&gt; None:\n        \"\"\"Set value in cache.\"\"\"\n        self.cache[key] = value\n\n    async def delete(self, key: str) -&gt; None:\n        \"\"\"Delete value from cache.\"\"\"\n        self.cache.pop(key, None)\n\n    async def flush(self) -&gt; None:\n        \"\"\"Flush all cache entries.\"\"\"\n        self.cache.clear()\n</code></pre>"},{"location":"customization/custom-caching/#using-custom-cache","title":"Using Custom Cache","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\n\nclass Product(RestEndpoint):\n    class Configuration:\n        caching_class = CustomRedisCache\n        caching_method_names = [\"GET\"]\n</code></pre>"},{"location":"customization/custom-caching/#best-practices","title":"Best Practices","text":"<ol> <li>Implement All Methods: Ensure all required methods are implemented</li> <li>Handle Errors: Gracefully handle cache failures</li> <li>Set Expiration: Always set appropriate expiration times</li> <li>Monitor Performance: Track cache hit rates</li> </ol>"},{"location":"customization/custom-caching/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Caching for basic usage</li> <li>Explore Middleware for request handling</li> </ul>"},{"location":"customization/deployment/","title":"Deployment","text":"<p>This guide covers production deployment best practices for Pylight applications.</p>"},{"location":"customization/deployment/#overview","title":"Overview","text":"<p>Production deployment considerations:</p> <ul> <li>Server Configuration: Uvicorn and ASGI server setup</li> <li>Environment Variables: Secure configuration management</li> <li>Database Setup: Production database configuration</li> <li>Security: Security best practices</li> <li>Monitoring: Logging and monitoring setup</li> </ul>"},{"location":"customization/deployment/#server-configuration","title":"Server Configuration","text":""},{"location":"customization/deployment/#uvicorn-production-settings","title":"Uvicorn Production Settings","text":"<pre><code>import uvicorn\n\nif __name__ == \"__main__\":\n    uvicorn.run(\n        \"app:app\",\n        host=\"0.0.0.0\",\n        port=8000,\n        workers=4,  # Multiple workers for production\n        log_level=\"info\"\n    )\n</code></pre>"},{"location":"customization/deployment/#using-gunicorn-with-uvicorn-workers","title":"Using Gunicorn with Uvicorn Workers","text":"<pre><code>gunicorn app:app -w 4 -k uvicorn.workers.UvicornWorker\n</code></pre>"},{"location":"customization/deployment/#environment-variables","title":"Environment Variables","text":""},{"location":"customization/deployment/#configuration-via-environment","title":"Configuration via Environment","text":"<pre><code>import os\n\napp = LightApi(\n    databaseUrl=os.getenv(\"DATABASE_URL\"),\n    swaggerTitle=os.getenv(\"API_TITLE\", \"Pylight API\")\n)\n</code></pre>"},{"location":"customization/deployment/#env-file","title":".env File","text":"<pre><code>DATABASE_URL=postgresql://user:password@host:port/database\nREDIS_URL=redis://localhost:6379\nSECRET_KEY=your-secret-key\n</code></pre>"},{"location":"customization/deployment/#database-setup","title":"Database Setup","text":""},{"location":"customization/deployment/#postgresql-production","title":"PostgreSQL Production","text":"<pre><code>database:\n  url: \"postgresql://user:password@host:port/database\"\n</code></pre>"},{"location":"customization/deployment/#connection-pooling","title":"Connection Pooling","text":"<p>Configure connection pooling for production:</p> <pre><code>from sqlalchemy.pool import QueuePool\n\nengine = create_async_engine(\n    database_url,\n    poolclass=QueuePool,\n    pool_size=10,\n    max_overflow=20\n)\n</code></pre>"},{"location":"customization/deployment/#security","title":"Security","text":""},{"location":"customization/deployment/#https","title":"HTTPS","text":"<p>Always use HTTPS in production:</p> <pre><code># Use reverse proxy (nginx, traefik) for HTTPS\n# Or use uvicorn with SSL certificates\nuvicorn.run(app, ssl_keyfile=\"key.pem\", ssl_certfile=\"cert.pem\")\n</code></pre>"},{"location":"customization/deployment/#secret-management","title":"Secret Management","text":"<p>Store secrets securely:</p> <ul> <li>Use environment variables</li> <li>Use secret management services (AWS Secrets Manager, HashiCorp Vault)</li> <li>Never commit secrets to version control</li> </ul>"},{"location":"customization/deployment/#cors-configuration","title":"CORS Configuration","text":"<p>Configure CORS properly:</p> <pre><code>from starlette.middleware.cors import CORSMiddleware\n\napp.starletteApp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://yourdomain.com\"],\n    allow_methods=[\"GET\", \"POST\"],\n    allow_headers=[\"*\"]\n)\n</code></pre>"},{"location":"customization/deployment/#monitoring","title":"Monitoring","text":""},{"location":"customization/deployment/#logging","title":"Logging","text":"<p>Configure production logging:</p> <pre><code>import logging\n\nlogging.basicConfig(\n    level=logging.INFO,\n    format=\"%(asctime)s - %(name)s - %(levelname)s - %(message)s\"\n)\n</code></pre>"},{"location":"customization/deployment/#health-checks","title":"Health Checks","text":"<p>Add health check endpoint:</p> <pre><code>@app.route(\"/health\")\nasync def health():\n    return {\"status\": \"healthy\"}\n</code></pre>"},{"location":"customization/deployment/#docker-deployment","title":"Docker Deployment","text":""},{"location":"customization/deployment/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM python:3.11-slim\n\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\nCOPY . .\n\nCMD [\"uvicorn\", \"app:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre>"},{"location":"customization/deployment/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<p>Pylight can be deployed to Kubernetes using the provided Helm chart. See the Helm Chart documentation for complete instructions.</p>"},{"location":"customization/deployment/#quick-start","title":"Quick Start","text":"<pre><code># Add Helm repository\nhelm repo add iklobato https://iklobato.github.io/pylight/charts\nhelm repo update\n\n# Install\nhelm install my-api iklobato/pylight -f values.yaml\n</code></pre>"},{"location":"customization/deployment/#local-development","title":"Local Development","text":"<p>For local testing with minikube, see the Local Development guide in the Helm chart documentation.</p>"},{"location":"customization/deployment/#best-practices","title":"Best Practices","text":"<ol> <li>Use Environment Variables: Never hardcode secrets</li> <li>Enable HTTPS: Always use HTTPS in production</li> <li>Monitor Performance: Set up monitoring and alerting</li> <li>Backup Database: Regular database backups</li> <li>Test Deployments: Test in staging before production</li> </ol>"},{"location":"customization/deployment/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Error Handling</li> <li>Explore Troubleshooting for common issues</li> </ul>"},{"location":"customization/error-handling/","title":"Error Handling","text":"<p>Pylight provides comprehensive error handling with customizable error responses.</p>"},{"location":"customization/error-handling/#overview","title":"Overview","text":"<p>Pylight handles errors at multiple levels:</p> <ul> <li>Domain Errors: Business logic errors</li> <li>Configuration Errors: Configuration validation errors</li> <li>Database Errors: Database connection and query errors</li> <li>Authentication Errors: Authentication and authorization errors</li> </ul>"},{"location":"customization/error-handling/#error-types","title":"Error Types","text":""},{"location":"customization/error-handling/#configurationerror","title":"ConfigurationError","text":"<p>Raised when configuration is invalid:</p> <pre><code>from pylight.domain.errors import ConfigurationError\n\nraise ConfigurationError(\"Invalid database URL\")\n</code></pre>"},{"location":"customization/error-handling/#databaseerror","title":"DatabaseError","text":"<p>Raised when database operations fail:</p> <pre><code>from pylight.domain.errors import DatabaseError\n\nraise DatabaseError(\"Failed to connect to database\")\n</code></pre>"},{"location":"customization/error-handling/#authenticationerror","title":"AuthenticationError","text":"<p>Raised when authentication fails:</p> <pre><code>from pylight.domain.errors import AuthenticationError\n\nraise AuthenticationError(\"Invalid credentials\")\n</code></pre>"},{"location":"customization/error-handling/#custom-error-handlers","title":"Custom Error Handlers","text":""},{"location":"customization/error-handling/#global-error-handler","title":"Global Error Handler","text":"<pre><code>from starlette.responses import JSONResponse\nfrom starlette.exceptions import HTTPException\n\nasync def custom_error_handler(request, exc):\n    \"\"\"Custom error handler.\"\"\"\n    if isinstance(exc, HTTPException):\n        return JSONResponse(\n            {\"error\": exc.detail, \"status_code\": exc.status_code},\n            status_code=exc.status_code\n        )\n    return JSONResponse(\n        {\"error\": \"Internal server error\"},\n        status_code=500\n    )\n\napp.starletteApp.add_exception_handler(Exception, custom_error_handler)\n</code></pre>"},{"location":"customization/error-handling/#error-response-format","title":"Error Response Format","text":"<p>Standard error response:</p> <pre><code>{\n  \"error\": \"Error message\",\n  \"detail\": \"Additional error details\"\n}\n</code></pre>"},{"location":"customization/error-handling/#best-practices","title":"Best Practices","text":"<ol> <li>Use Appropriate Error Types: Use specific error types</li> <li>Provide Clear Messages: Error messages should be clear and actionable</li> <li>Log Errors: Always log errors for debugging</li> <li>Don't Expose Internals: Don't expose internal implementation details</li> </ol>"},{"location":"customization/error-handling/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Deployment for production error handling</li> <li>Explore Troubleshooting for common issues</li> </ul>"},{"location":"customization/middleware/","title":"Middleware","text":"<p>Pylight supports custom middleware for cross-cutting concerns like logging, authentication, CORS, and more.</p>"},{"location":"customization/middleware/#overview","title":"Overview","text":"<p>Middleware allows you to:</p> <ul> <li>Process Requests: Intercept and process requests before handlers</li> <li>Process Responses: Modify responses before sending</li> <li>Add Headers: Add custom headers to responses</li> <li>Logging: Log requests and responses</li> <li>Error Handling: Handle errors globally</li> </ul>"},{"location":"customization/middleware/#basic-middleware","title":"Basic Middleware","text":""},{"location":"customization/middleware/#starlette-middleware","title":"Starlette Middleware","text":"<pre><code>from starlette.middleware.base import BaseHTTPMiddleware\nfrom starlette.requests import Request\nfrom starlette.responses import Response\n\nclass LoggingMiddleware(BaseHTTPMiddleware):\n    \"\"\"Log all requests and responses.\"\"\"\n\n    async def dispatch(self, request: Request, call_next):\n        # Process request\n        print(f\"Request: {request.method} {request.url}\")\n\n        # Call next middleware/handler\n        response = await call_next(request)\n\n        # Process response\n        print(f\"Response: {response.status_code}\")\n\n        return response\n</code></pre>"},{"location":"customization/middleware/#adding-middleware","title":"Adding Middleware","text":""},{"location":"customization/middleware/#programmatic-addition","title":"Programmatic Addition","text":"<pre><code>from pylight.presentation.app import LightApi\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.addMiddleware([LoggingMiddleware])\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"customization/middleware/#common-middleware-patterns","title":"Common Middleware Patterns","text":""},{"location":"customization/middleware/#cors-middleware","title":"CORS Middleware","text":"<pre><code>from starlette.middleware.cors import CORSMiddleware\n\napp = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.starletteApp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"]\n)\n</code></pre>"},{"location":"customization/middleware/#authentication-middleware","title":"Authentication Middleware","text":"<pre><code>class AuthMiddleware(BaseHTTPMiddleware):\n    async def dispatch(self, request: Request, call_next):\n        # Check authentication\n        if not await self.is_authenticated(request):\n            return JSONResponse({\"error\": \"Unauthorized\"}, status_code=401)\n\n        return await call_next(request)\n</code></pre>"},{"location":"customization/middleware/#best-practices","title":"Best Practices","text":"<ol> <li>Order Matters: Middleware order affects execution</li> <li>Handle Errors: Always handle errors gracefully</li> <li>Performance: Keep middleware lightweight</li> <li>Logging: Log important events</li> </ol>"},{"location":"customization/middleware/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Error Handling</li> <li>Explore Deployment for production setup</li> </ul>"},{"location":"examples/","title":"Pylight Integration Examples","text":"<p>This directory contains integration example scripts that validate all Pylight framework features work correctly.</p>"},{"location":"examples/#prerequisites","title":"Prerequisites","text":"<p>Before running the integration examples, ensure you have:</p> <ol> <li> <p>PostgreSQL Docker Container Running:    <pre><code>docker run -d \\\n  --name pylight-postgres \\\n  -p 5432:5432 \\\n  -e POSTGRES_PASSWORD=postgres \\\n  -e POSTGRES_DB=pylight \\\n  postgres:latest\n</code></pre></p> </li> <li> <p>Redis Running (for caching examples):    <pre><code>docker run -d \\\n  --name pylight-redis \\\n  -p 6379:6379 \\\n  redis:latest\n</code></pre></p> </li> <li> <p>Python Dependencies Installed:    <pre><code>pip install -r requirements.txt\n# Or if using uv:\nuv pip install -e .\n</code></pre></p> </li> <li> <p>Framework Code Available: The Pylight framework code must be in the Python path (installed or PYTHONPATH set).</p> </li> </ol>"},{"location":"examples/#running-examples","title":"Running Examples","text":"<p>Each example script is standalone and can be run independently:</p>"},{"location":"examples/#basic-usage-example","title":"Basic Usage Example","text":"<pre><code>cd docs/examples\npython basic_usage.py\n</code></pre> <p>What it tests:  - Basic framework setup - Simple model registration - Framework initialization</p>"},{"location":"examples/#rest-endpoints-example","title":"REST Endpoints Example","text":"<pre><code>cd docs/examples\npython rest_endpoints.py\n</code></pre> <p>What it tests:  - GET, POST, PUT, DELETE endpoints - Database state validation - Response structure validation</p>"},{"location":"examples/#graphql-example","title":"GraphQL Example","text":"<pre><code>python graphql_queries.py\n</code></pre> <p>What it tests: - GraphQL queries and mutations - Filtering - Database consistency - GraphiQL interface</p>"},{"location":"examples/#websocket-hooks-example","title":"WebSocket Hooks Example","text":"<pre><code>python websocket_hooks.py\n</code></pre> <p>What it tests: - WebSocket connection establishment - Real-time message delivery - Multiple client subscriptions</p>"},{"location":"examples/#basic-usage-example_1","title":"Basic Usage Example","text":"<pre><code>python basic_usage.py\n</code></pre> <p>What it tests: - Basic framework setup and configuration - Simple model registration - Framework initialization</p>"},{"location":"examples/#comprehensive-integration-example","title":"Comprehensive Integration Example","text":"<pre><code>python comprehensive_integration.py\n</code></pre> <p>What it tests: - All framework features in a single execution - End-to-end functionality - Database state persistence - Feature interactions</p> <p>Expected Duration: &lt; 5 minutes</p>"},{"location":"examples/#example-output","title":"Example Output","text":"<p>Successful example execution shows:</p> <pre><code>============================================================\nREST Endpoints Validation Example\n============================================================\n\n1. Verifying dependencies...\n   \u2713 PostgreSQL connection verified\n\n2. Starting server...\n   \u2713 Server started on http://127.0.0.1:8000\n\n3. Testing POST /api/products...\n   \u2713 Product created with ID: 1\n\n4. Validating database state after POST...\n   \u2713 Database state validated\n\n...\n\n\u2713 All REST endpoint tests passed!\n============================================================\n</code></pre>"},{"location":"examples/#troubleshooting","title":"Troubleshooting","text":""},{"location":"examples/#postgresql-not-available","title":"PostgreSQL Not Available","text":"<pre><code>ERROR: PostgreSQL not available: connection refused\nPlease ensure PostgreSQL Docker container is running:\n  docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=postgres postgres\n</code></pre> <p>Solution: Start the PostgreSQL container as shown in Prerequisites.</p>"},{"location":"examples/#redis-not-available","title":"Redis Not Available","text":"<pre><code>ERROR: Redis not available: connection refused\nPlease ensure Redis is running:\n  docker run -d -p 6379:6379 redis\n</code></pre> <p>Solution: Start the Redis container as shown in Prerequisites.</p>"},{"location":"examples/#port-already-in-use","title":"Port Already in Use","text":"<pre><code>ERROR: Port 8000 already in use\n</code></pre> <p>Solution: Either stop the process using port 8000, or modify the example script to use a different port.</p>"},{"location":"examples/#database-connection-failed","title":"Database Connection Failed","text":"<pre><code>ERROR: Could not connect to database\n</code></pre> <p>Solution:  1. Verify PostgreSQL container is running: <code>docker ps</code> 2. Check connection string matches container configuration 3. Verify database <code>pylight</code> exists (or create it)</p>"},{"location":"examples/#framework-import-errors","title":"Framework Import Errors","text":"<pre><code>ModuleNotFoundError: No module named 'src'\n</code></pre> <p>Solution:  1. Install framework in development mode: <code>pip install -e .</code> 2. Or set PYTHONPATH: <code>export PYTHONPATH=/path/to/pylight:$PYTHONPATH</code></p>"},{"location":"examples/#file-structure","title":"File Structure","text":"<pre><code>docs/examples/\n\u251c\u2500\u2500 README.md                    # This file\n\u251c\u2500\u2500 app_module.py                # Shared application module for examples\n\u251c\u2500\u2500 utils.py                     # Server management utilities\n\u251c\u2500\u2500 db_utils.py                  # Database utilities\n\u251c\u2500\u2500 test_models.py               # Test models (Product, User)\n\u251c\u2500\u2500 test_config.yaml             # Test configuration\n\u251c\u2500\u2500 test_config_class.py         # Test configuration class\n\u251c\u2500\u2500 basic_usage.py                # Basic usage example\n\u251c\u2500\u2500 comprehensive_integration.py  # Comprehensive example (all features)\n\u251c\u2500\u2500 rest_endpoints.py             # REST endpoints example\n\u251c\u2500\u2500 graphql_queries.py           # GraphQL example\n\u2514\u2500\u2500 websocket_hooks.py            # WebSocket example\n</code></pre>"},{"location":"examples/#example-script-structure","title":"Example Script Structure","text":"<p>Each example script follows this pattern:</p> <pre><code>#!/usr/bin/env python3\n\"\"\"Example: Feature Validation\"\"\"\n\nimport sys\nimport os\nimport requests\n\n# Add parent directory to path\nsys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), \"../..\")))\n\nfrom docs.examples.utils import verify_postgres, start_server, wait_for_server, stop_server\nfrom docs.examples.db_utils import create_database_connection, cleanup_test_data\n\ndef main():\n    # 1. Verify dependencies\n    # 2. Start server\n    # 3. Run tests\n    # 4. Validate database state\n    # 5. Cleanup\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"examples/#next-steps","title":"Next Steps","text":"<p>After running examples successfully:</p> <ol> <li>Review example code to understand framework usage patterns</li> <li>Use examples as templates for your own integration tests</li> <li>Extend examples to test additional scenarios</li> <li>Report any failures or unexpected behavior</li> </ol>"},{"location":"examples/#additional-resources","title":"Additional Resources","text":"<ul> <li>Framework Documentation: <code>docs/api/README.md</code></li> <li>Framework Source: <code>src/</code></li> <li>Main Framework Spec: <code>specs/001-pylight-framework/spec.md</code></li> </ul>"},{"location":"examples/yaml_configs/","title":"YAML Configuration Examples","text":"<p>This directory contains example YAML configuration files demonstrating different ways to configure Pylight API endpoints.</p>"},{"location":"examples/yaml_configs/#example-files","title":"Example Files","text":""},{"location":"examples/yaml_configs/#basic_configyaml","title":"basic_config.yaml","text":"<p>Purpose: Minimal configuration example showing the simplest way to expose database tables as REST API endpoints.</p> <p>Features Demonstrated: - Basic database connection - Table exposure with default settings - All HTTP methods enabled by default - All features enabled by default</p> <p>Use Case: Quick start for developers who want to expose tables with minimal configuration.</p> <p>Usage: <pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/basic_config.yaml\n</code></pre></p>"},{"location":"examples/yaml_configs/#auth_configyaml","title":"auth_config.yaml","text":"<p>Purpose: Demonstrates JWT authentication configuration and role-based access control.</p> <p>Features Demonstrated: - Global JWT authentication provider configuration - Per-table authentication requirements - Method-specific role permissions - Public vs. authenticated endpoints</p> <p>Use Case: APIs that require user authentication and need to restrict access based on user roles.</p> <p>Usage: <pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/auth_config.yaml\n</code></pre></p> <p>Prerequisites: - JWT secret key configured (change <code>secret_key</code> in YAML for production) - Users with JWT tokens containing <code>role</code> claim</p>"},{"location":"examples/yaml_configs/#permissions_configyaml","title":"permissions_config.yaml","text":"<p>Purpose: Shows fine-grained permission configuration with different roles per HTTP method.</p> <p>Features Demonstrated: - Table-level role requirements - Method-specific permissions (GET, POST, PUT, DELETE) - Public access configuration - Admin-only endpoints</p> <p>Use Case: Complex permission scenarios where different user roles need different levels of access.</p> <p>Usage: <pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/permissions_config.yaml\n</code></pre></p> <p>Prerequisites: - JWT authentication configured - Users with appropriate roles (admin, user, etc.)</p>"},{"location":"examples/yaml_configs/#features_configyaml","title":"features_config.yaml","text":"<p>Purpose: Demonstrates per-table feature configuration (caching, pagination, filtering, sorting, GraphQL, WebSocket).</p> <p>Features Demonstrated: - Caching configuration (requires Redis) - Custom pagination settings (page size, max page size) - Filtering enable/disable - Sorting enable/disable - GraphQL endpoint availability - WebSocket endpoint availability</p> <p>Use Case: Optimizing API performance and features per table based on usage patterns.</p> <p>Usage: <pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/features_config.yaml\n</code></pre></p> <p>Prerequisites: - Redis running (for caching examples) - Tables with appropriate data for testing pagination/filtering/sorting</p>"},{"location":"examples/yaml_configs/#common-configuration-patterns","title":"Common Configuration Patterns","text":""},{"location":"examples/yaml_configs/#minimal-configuration","title":"Minimal Configuration","text":"<pre><code>database:\n  url: \"postgresql://user:pass@localhost:5432/dbname\"\n\ntables:\n  - name: \"table_name\"\n</code></pre>"},{"location":"examples/yaml_configs/#authentication-required","title":"Authentication Required","text":"<pre><code>authentication:\n  jwt:\n    secret_key: \"your-secret-key\"\n\ntables:\n  - name: \"protected_table\"\n    authentication:\n      required: true\n</code></pre>"},{"location":"examples/yaml_configs/#method-specific-permissions","title":"Method-Specific Permissions","text":"<pre><code>tables:\n  - name: \"table_name\"\n    permissions:\n      GET: []           # Any authenticated user\n      POST: [\"admin\"]    # Only admins\n      PUT: [\"admin\"]\n      DELETE: [\"admin\"]\n</code></pre>"},{"location":"examples/yaml_configs/#custom-pagination","title":"Custom Pagination","text":"<pre><code>tables:\n  - name: \"table_name\"\n    features:\n      pagination:\n        enabled: true\n        default_page_size: 20\n        max_page_size: 100\n</code></pre>"},{"location":"examples/yaml_configs/#disable-features","title":"Disable Features","text":"<pre><code>tables:\n  - name: \"table_name\"\n    features:\n      filtering:\n        enabled: false\n      sorting:\n        enabled: false\n      graphql: false\n      websocket: false\n</code></pre>"},{"location":"examples/yaml_configs/#testing-examples","title":"Testing Examples","text":""},{"location":"examples/yaml_configs/#start-server-with-basic-config","title":"Start Server with Basic Config","text":"<pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/basic_config.yaml\n</code></pre>"},{"location":"examples/yaml_configs/#start-server-on-custom-port","title":"Start Server on Custom Port","text":"<pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/basic_config.yaml --port 8001\n</code></pre>"},{"location":"examples/yaml_configs/#start-server-with-authentication-config","title":"Start Server with Authentication Config","text":"<pre><code>./scripts/test_yaml_config.sh docs/examples/yaml_configs/auth_config.yaml\n</code></pre>"},{"location":"examples/yaml_configs/#prerequisites","title":"Prerequisites","text":"<p>Before using these examples, ensure:</p> <ol> <li> <p>PostgreSQL Docker container running:    <pre><code>docker run -d --name postgres -e POSTGRES_PASSWORD=postgres -p 5432:5432 postgres:latest\n</code></pre></p> </li> <li> <p>Redis Docker container running (for caching examples):    <pre><code>docker run -d --name redis -p 6379:6379 redis:latest\n</code></pre></p> </li> <li> <p>Test database and tables created:    <pre><code>psql -h localhost -U postgres -c \"CREATE DATABASE pylight;\"\n# Then create tables as needed for your examples\n</code></pre></p> </li> <li> <p>Pylight framework installed:    <pre><code>uv sync\n</code></pre></p> </li> </ol>"},{"location":"examples/yaml_configs/#notes","title":"Notes","text":"<ul> <li>All example files use <code>localhost:5432</code> for PostgreSQL - adjust if your setup differs</li> <li>JWT secret keys in examples are placeholders - change them for production use</li> <li>Example tables (products, users, orders) should exist in your test database</li> <li>Redis is optional but required for caching examples to work fully</li> <li>Each example file is self-contained and can be used independently</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to Pylight! This guide will help you get up and running with Pylight in minutes.</p>"},{"location":"getting-started/#what-youll-learn","title":"What You'll Learn","text":"<p>By the end of this guide, you'll be able to: - Install Pylight on your system - Create your first API endpoint - Understand Pylight's architecture - Deploy a working API</p>"},{"location":"getting-started/#quick-navigation","title":"Quick Navigation","text":"<ul> <li>Installation - Install Pylight and verify the installation</li> <li>Quick Start - Create your first API in minutes</li> <li>Architecture - Understand how Pylight works</li> </ul>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, make sure you have: - Python 3.11 or higher installed - Basic familiarity with Python and web APIs - A database (PostgreSQL, MySQL, or SQLite) - SQLite works great for getting started</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ol> <li>Install Pylight - Get Pylight installed on your system</li> <li>Quick Start Guide - Build your first API</li> <li>Architecture Overview - Learn how Pylight is structured</li> </ol> <p>Ready to begin? Start with Installation \u2192</p>"},{"location":"getting-started/architecture/","title":"Architecture","text":"<p>Pylight follows a clean, layered architecture that separates concerns and enables maintainability and extensibility.</p>"},{"location":"getting-started/architecture/#overview","title":"Overview","text":"<p>Pylight is organized into four main layers:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Presentation Layer             \u2502\n\u2502  (REST, GraphQL, WebSocket)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Application Layer              \u2502\n\u2502  (Endpoint Generation, Orchestration)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Domain Layer                   \u2502\n\u2502  (Business Logic, Entities)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Infrastructure Layer           \u2502\n\u2502  (Database, Cache, Auth, Config)     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"getting-started/architecture/#layer-details","title":"Layer Details","text":""},{"location":"getting-started/architecture/#domain-layer","title":"Domain Layer","text":"<p>Location: <code>src/domain/</code></p> <p>Purpose: Contains business logic and core entities.</p> <p>Components: - Entities: Base classes like <code>RestEndpoint</code> that define the model structure - Errors: Domain-specific error types (<code>ConfigurationError</code>, <code>DatabaseError</code>, etc.) - Plugins: Plugin interface definitions - Validators: Base validation logic</p> <p>Key Classes: - <code>RestEndpoint</code>: Base class for all API models - <code>PylightError</code>: Base exception class - <code>Plugin</code>: Plugin interface</p> <p>Dependencies: None (domain does not depend on infrastructure)</p>"},{"location":"getting-started/architecture/#application-layer","title":"Application Layer","text":"<p>Location: <code>src/application/</code></p> <p>Purpose: Orchestrates endpoint generation and business workflows.</p> <p>Components: - Endpoints: REST route generation logic - GraphQL: GraphQL schema generation - WebSocket: WebSocket hook generation - Config: YAML and class-based configuration loading</p> <p>Key Classes: - <code>RESTGenerator</code>: Generates REST routes from models - <code>SchemaGenerator</code>: Generates GraphQL schemas - <code>HookGenerator</code>: Generates WebSocket hooks - <code>YAMLTableConfigLoader</code>: Loads and processes YAML configurations</p> <p>Dependencies: Domain layer only</p>"},{"location":"getting-started/architecture/#infrastructure-layer","title":"Infrastructure Layer","text":"<p>Location: <code>src/infrastructure/</code></p> <p>Purpose: Provides adapters for external systems and services.</p> <p>Components: - Database: Connection management, reflection, migrations - Cache: Redis caching implementation - Auth: JWT and OAuth2 authentication - Config: Configuration loading and validation</p> <p>Key Classes: - <code>DatabaseManager</code>: Manages database connections and sessions - <code>DatabaseReflection</code>: Reflects database schemas - <code>DefaultRedisCache</code>: Redis caching implementation - <code>DefaultJWTAuthentication</code>: JWT authentication - <code>DefaultOAuth2Authentication</code>: OAuth2 authentication - <code>YAMLLoader</code>: Loads YAML configuration files</p> <p>Dependencies: Domain layer</p>"},{"location":"getting-started/architecture/#presentation-layer","title":"Presentation Layer","text":"<p>Location: <code>src/presentation/</code></p> <p>Purpose: Handles HTTP requests, WebSocket connections, and API documentation.</p> <p>Components: - REST: REST endpoint handlers (GET, POST, PUT, DELETE) - GraphQL: GraphQL query and mutation handlers - WebSocket: WebSocket connection handlers - Docs: OpenAPI/Swagger and GraphiQL interfaces - Middleware: Authentication, CORS, caching middleware</p> <p>Key Classes: - <code>LightApi</code>: Main application class - REST handlers: <code>GetHandler</code>, <code>PostHandler</code>, <code>PutHandler</code>, <code>DeleteHandler</code> - <code>createGraphQLRoute</code>: GraphQL route factory - <code>createWebSocketRoute</code>: WebSocket route factory - <code>OpenAPIGenerator</code>: Generates OpenAPI specifications</p> <p>Dependencies: Application and Infrastructure layers</p>"},{"location":"getting-started/architecture/#data-flow","title":"Data Flow","text":""},{"location":"getting-started/architecture/#request-flow","title":"Request Flow","text":"<ol> <li>Request arrives at Presentation layer (Starlette)</li> <li>Middleware processes request (auth, CORS, caching)</li> <li>Route handler (REST/GraphQL/WebSocket) processes request</li> <li>Application layer orchestrates business logic</li> <li>Domain layer validates and processes entities</li> <li>Infrastructure layer interacts with database/cache</li> <li>Response flows back through layers</li> </ol>"},{"location":"getting-started/architecture/#model-registration-flow","title":"Model Registration Flow","text":"<ol> <li>Developer defines model inheriting from <code>RestEndpoint</code></li> <li>Calls <code>app.register(model)</code> on LightApi</li> <li>Application layer generates routes:</li> <li>REST routes via <code>RESTGenerator</code></li> <li>GraphQL schema via <code>SchemaGenerator</code></li> <li>WebSocket hooks via <code>HookGenerator</code></li> <li>Presentation layer registers routes with Starlette</li> <li>Endpoints are live and accessible</li> </ol>"},{"location":"getting-started/architecture/#key-design-principles","title":"Key Design Principles","text":""},{"location":"getting-started/architecture/#separation-of-concerns","title":"Separation of Concerns","text":"<p>Each layer has a single, well-defined responsibility: - Domain: Business rules and entities - Application: Use cases and orchestration - Infrastructure: External adapters - Presentation: Request/response handling</p>"},{"location":"getting-started/architecture/#dependency-direction","title":"Dependency Direction","text":"<p>Dependencies flow downward only: - Presentation \u2192 Application \u2192 Domain - Infrastructure \u2192 Domain - Domain never depends on Infrastructure or Presentation</p>"},{"location":"getting-started/architecture/#extensibility","title":"Extensibility","text":"<ul> <li>Plugins: Extend functionality via plugin system</li> <li>Custom Authentication: Implement custom auth classes</li> <li>Custom Caching: Implement custom cache backends</li> <li>Middleware: Add custom middleware</li> </ul>"},{"location":"getting-started/architecture/#component-relationships","title":"Component Relationships","text":""},{"location":"getting-started/architecture/#lightapi","title":"LightApi","text":"<p>The main application class that: - Initializes all layers - Manages model registration - Coordinates endpoint generation - Handles configuration</p>"},{"location":"getting-started/architecture/#restendpoint","title":"RestEndpoint","text":"<p>Base class for all models that: - Provides SQLAlchemy declarative base - Defines configuration structure - Enables automatic endpoint generation</p>"},{"location":"getting-started/architecture/#databasemanager","title":"DatabaseManager","text":"<p>Manages database connections: - Handles async/sync modes - Manages connection pooling - Provides session management</p>"},{"location":"getting-started/architecture/#configuration-flow","title":"Configuration Flow","text":"<ol> <li>Configuration loaded (YAML or class-based)</li> <li>Validated by Infrastructure layer</li> <li>Applied to LightApi instance</li> <li>Used by Application layer for endpoint generation</li> <li>Respected by Presentation layer for request handling</li> </ol>"},{"location":"getting-started/architecture/#extension-points","title":"Extension Points","text":""},{"location":"getting-started/architecture/#custom-authentication","title":"Custom Authentication","text":"<p>Extend <code>DefaultJWTAuthentication</code> or <code>DefaultOAuth2Authentication</code>:</p> <pre><code>from pylight.infrastructure.auth.jwt import DefaultJWTAuthentication\n\nclass CustomAuth(DefaultJWTAuthentication):\n    # Custom authentication logic\n    pass\n</code></pre>"},{"location":"getting-started/architecture/#custom-caching","title":"Custom Caching","text":"<p>Extend <code>DefaultRedisCache</code>:</p> <pre><code>from pylight.infrastructure.cache.redis import DefaultRedisCache\n\nclass CustomCache(DefaultRedisCache):\n    # Custom caching logic\n    pass\n</code></pre>"},{"location":"getting-started/architecture/#plugins","title":"Plugins","text":"<p>Implement the <code>Plugin</code> interface:</p> <pre><code>from pylight.domain.plugins.interface import Plugin\n\nclass CustomPlugin(Plugin):\n    def initialize(self, app):\n        # Plugin initialization\n        pass\n\n    def register(self, app):\n        # Register routes, middleware, etc.\n        pass\n</code></pre>"},{"location":"getting-started/architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about REST Endpoints</li> <li>Explore GraphQL</li> <li>Understand Configuration</li> <li>Check out Customization options</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide covers installing Pylight and verifying the installation works correctly.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11 or higher</li> <li>pip (Python package manager)</li> </ul>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"getting-started/installation/#using-pip","title":"Using pip","text":"<pre><code>pip install pylight\n</code></pre>"},{"location":"getting-started/installation/#using-uv-recommended","title":"Using uv (Recommended)","text":"<p>If you're using <code>uv</code> for Python package management:</p> <pre><code>uv pip install pylight\n</code></pre>"},{"location":"getting-started/installation/#from-source","title":"From Source","text":"<p>To install from the GitHub repository:</p> <pre><code>git clone https://github.com/iklobato/pylight.git\ncd pylight\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify that Pylight is installed correctly:</p> <pre><code># Check if pylight command is available\npylight --version\n\n# Or verify Python import\npython3 -c \"from pylight.presentation.app import LightApi; print('Pylight installed successfully')\"\n</code></pre>"},{"location":"getting-started/installation/#dependencies","title":"Dependencies","text":"<p>Pylight automatically installs the following dependencies:</p> <ul> <li>Starlette - ASGI web framework</li> <li>Uvicorn - ASGI server</li> <li>SQLAlchemy - Database ORM</li> <li>Strawberry GraphQL - GraphQL support</li> <li>PyJWT - JWT authentication</li> <li>python-jose - JWT/OAuth2 utilities</li> <li>redis - Redis client for caching</li> <li>PyYAML - YAML configuration support</li> <li>Alembic - Database migrations</li> <li>Click - CLI framework</li> <li>asyncpg - Async PostgreSQL driver</li> </ul>"},{"location":"getting-started/installation/#database-setup","title":"Database Setup","text":"<p>Pylight works with any SQLAlchemy-compatible database. For getting started, SQLite requires no additional setup:</p> <pre><code># SQLite (no setup required)\ndatabaseUrl = \"sqlite:///app.db\"\n</code></pre> <p>For PostgreSQL or MySQL, you'll need the database server running and connection credentials:</p> <pre><code># PostgreSQL\ndatabaseUrl = \"postgresql://user:password@localhost:5432/dbname\"\n\n# MySQL\ndatabaseUrl = \"mysql://user:password@localhost:3306/dbname\"\n</code></pre>"},{"location":"getting-started/installation/#optional-redis-for-caching","title":"Optional: Redis for Caching","text":"<p>If you want to use Redis caching (optional), install and start Redis:</p> <pre><code># Using Docker\ndocker run -d -p 6379:6379 redis:latest\n\n# Or install locally\n# macOS: brew install redis\n# Linux: apt-get install redis-server\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#import-errors","title":"Import Errors","text":"<p>If you encounter import errors, make sure Pylight is installed in the correct Python environment:</p> <pre><code># Check which Python is being used\nwhich python3\n\n# Verify installation\npip list | grep pylight\n</code></pre>"},{"location":"getting-started/installation/#database-connection-issues","title":"Database Connection Issues","text":"<p>If you have database connection issues: - Verify your database server is running - Check connection URL format - Ensure database credentials are correct - For PostgreSQL, ensure <code>asyncpg</code> is installed: <code>pip install asyncpg</code></p>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Once Pylight is installed, proceed to the Quick Start Guide to create your first API.</p>"},{"location":"getting-started/populate-test-database/","title":"Populate Test Database","text":"<p>The <code>populate-test-database</code> command generates realistic test data for comprehensive Pylight feature testing.</p>"},{"location":"getting-started/populate-test-database/#quick-start","title":"Quick Start","text":"<pre><code># Start PostgreSQL (Docker)\ndocker run -d \\\n  --name pylight-postgres \\\n  -p 5432:5432 \\\n  -e POSTGRES_PASSWORD=postgres \\\n  -e POSTGRES_DB=pylight_test \\\n  postgres:15\n\n# Populate database\nexport DATABASE_URL=\"postgresql://postgres:postgres@localhost:5432/pylight_test\"\npylight populate-test-database --create-schema\n</code></pre>"},{"location":"getting-started/populate-test-database/#usage","title":"Usage","text":""},{"location":"getting-started/populate-test-database/#basic-usage","title":"Basic Usage","text":"<pre><code>pylight populate-test-database --create-schema\n</code></pre> <p>This creates the e-commerce schema (10+ tables) and populates each table with 1000 records.</p>"},{"location":"getting-started/populate-test-database/#custom-record-counts","title":"Custom Record Counts","text":"<pre><code>pylight populate-test-database \\\n  --create-schema \\\n  --records-per-table 5000 \\\n  --table-counts '{\"users\": 2000, \"products\": 10000}'\n</code></pre>"},{"location":"getting-started/populate-test-database/#reproducible-data","title":"Reproducible Data","text":"<pre><code>pylight populate-test-database \\\n  --create-schema \\\n  --seed 42\n</code></pre> <p>Using the same seed produces identical data across runs.</p>"},{"location":"getting-started/populate-test-database/#command-options","title":"Command Options","text":"Option Description Default <code>--connection-string</code>, <code>-c</code> PostgreSQL connection string <code>$DATABASE_URL</code> <code>--create-schema</code>, <code>-s</code> Create/drop schema before populating <code>False</code> <code>--seed</code>, <code>-S</code> Seed value for reproducibility <code>None</code> <code>--records-per-table</code>, <code>-r</code> Default records per table <code>1000</code> <code>--table-counts</code>, <code>-t</code> JSON dict of table counts <code>{}</code> <code>--cleanup-on-failure</code>, <code>-C</code> Clean up partial data on failure <code>True</code> <code>--verbose</code>, <code>-v</code> Enable verbose output <code>False</code> <code>--quiet</code>, <code>-q</code> Suppress non-error output <code>False</code>"},{"location":"getting-started/populate-test-database/#environment-variables","title":"Environment Variables","text":"<ul> <li><code>DATABASE_URL</code>: PostgreSQL connection string</li> <li><code>PYLIGHT_POPULATE_SEED</code>: Seed value for reproducibility</li> <li><code>PYLIGHT_POPULATE_VERBOSE</code>: Enable verbose output</li> </ul>"},{"location":"getting-started/populate-test-database/#generated-schema","title":"Generated Schema","text":"<p>The command creates an e-commerce schema with 10+ interconnected tables:</p> <ul> <li>users: User accounts</li> <li>categories: Product categories (with parent-child relationships)</li> <li>products: Products with JSON dimensions</li> <li>addresses: User addresses</li> <li>orders: Customer orders</li> <li>order_items: Order line items</li> <li>reviews: Product reviews</li> <li>payments: Payment transactions</li> <li>shipments: Shipping information</li> <li>inventory: Product inventory</li> </ul>"},{"location":"getting-started/populate-test-database/#use-with-pylight","title":"Use with Pylight","text":"<p>After populating the database, use it with Pylight:</p> <pre><code># Create YAML config\ncat &gt; config.yaml &lt;&lt; EOF\ndatabase:\n  url: \"postgresql://postgres:postgres@localhost:5432/pylight_test\"\n\ntables:\n  - name: \"users\"\n  - name: \"products\"\n  - name: \"orders\"\nEOF\n\n# Start Pylight\npylight start --config config.yaml\n</code></pre>"},{"location":"getting-started/populate-test-database/#see-also","title":"See Also","text":"<ul> <li>Quick Start Guide</li> <li>CLI Contract</li> <li>Example Configuration</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>This guide will help you create your first Pylight API in minutes. By the end, you'll have a working API with REST endpoints, GraphQL, and WebSocket support.</p>"},{"location":"getting-started/quick-start/#step-1-create-a-model","title":"Step 1: Create a Model","text":"<p>Create a Python file (e.g., <code>app.py</code>) and define your first model:</p> <pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n</code></pre> <p>View source: <code>docs/examples/basic_usage.py</code></p>"},{"location":"getting-started/quick-start/#step-2-initialize-the-application","title":"Step 2: Initialize the Application","text":"<p>Create a LightApi instance and register your model:</p> <pre><code>app = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\n</code></pre>"},{"location":"getting-started/quick-start/#step-3-run-the-server","title":"Step 3: Run the Server","text":"<p>Start the development server:</p> <pre><code>app.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"getting-started/quick-start/#complete-example","title":"Complete Example","text":"<p>Here's the complete <code>app.py</code> file:</p> <pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n\nif __name__ == \"__main__\":\n    app = LightApi(databaseUrl=\"sqlite:///app.db\")\n    app.register(Product)\n    app.run(host=\"localhost\", port=8000)\n</code></pre> <p>View source: <code>docs/examples/basic_usage.py</code></p>"},{"location":"getting-started/quick-start/#step-4-test-your-api","title":"Step 4: Test Your API","text":"<p>Once the server is running, you can access:</p>"},{"location":"getting-started/quick-start/#rest-endpoints","title":"REST Endpoints","text":"<ul> <li>List all products: <code>GET http://localhost:8000/api/products</code></li> <li>Get a product: <code>GET http://localhost:8000/api/products/{id}</code></li> <li>Create a product: <code>POST http://localhost:8000/api/products</code></li> <li>Update a product: <code>PUT http://localhost:8000/api/products/{id}</code></li> <li>Delete a product: <code>DELETE http://localhost:8000/api/products/{id}</code></li> </ul>"},{"location":"getting-started/quick-start/#api-documentation","title":"API Documentation","text":"<ul> <li>Swagger UI: <code>http://localhost:8000/docs</code></li> <li>OpenAPI Spec: <code>http://localhost:8000/openapi.json</code></li> </ul>"},{"location":"getting-started/quick-start/#graphql","title":"GraphQL","text":"<ul> <li>GraphiQL: <code>http://localhost:8000/graphiql</code></li> <li>GraphQL Endpoint: <code>http://localhost:8000/graphql</code></li> </ul>"},{"location":"getting-started/quick-start/#websocket","title":"WebSocket","text":"<ul> <li>WebSocket Endpoint: <code>ws://localhost:8000/ws/products</code></li> </ul>"},{"location":"getting-started/quick-start/#example-create-a-product","title":"Example: Create a Product","text":"<p>Using curl:</p> <pre><code>curl -X POST http://localhost:8000/api/products \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Laptop\", \"price\": 999}'\n</code></pre> <p>Response:</p> <pre><code>{\n  \"id\": 1,\n  \"name\": \"Laptop\",\n  \"price\": 999\n}\n</code></pre>"},{"location":"getting-started/quick-start/#example-list-products","title":"Example: List Products","text":"<pre><code>curl http://localhost:8000/api/products\n</code></pre> <p>Response:</p> <pre><code>[\n  {\n    \"id\": 1,\n    \"name\": \"Laptop\",\n    \"price\": 999\n  }\n]\n</code></pre>"},{"location":"getting-started/quick-start/#example-graphql-query","title":"Example: GraphQL Query","text":"<p>Visit <code>http://localhost:8000/graphiql</code> and try:</p> <pre><code>query {\n  products {\n    id\n    name\n    price\n  }\n}\n</code></pre>"},{"location":"getting-started/quick-start/#whats-next","title":"What's Next?","text":"<p>Congratulations! You've created your first Pylight API. Now you can:</p> <ul> <li>Learn about REST Endpoints - Advanced REST features</li> <li>Explore GraphQL - GraphQL queries and mutations</li> <li>Add Authentication - Secure your API</li> <li>Configure YAML Configuration - Use YAML for configuration</li> <li>Check out Use Cases - Real-world examples</li> </ul>"},{"location":"getting-started/quick-start/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/quick-start/#database-not-found","title":"Database Not Found","text":"<p>If you see database errors, make sure the database file is created. SQLite will create the file automatically, but you may need to create tables first. Pylight will create tables automatically when you register models.</p>"},{"location":"getting-started/quick-start/#port-already-in-use","title":"Port Already in Use","text":"<p>If port 8000 is already in use, change it:</p> <pre><code>app.run(host=\"localhost\", port=8001)\n</code></pre>"},{"location":"getting-started/quick-start/#import-errors","title":"Import Errors","text":"<p>Make sure Pylight is installed:</p> <pre><code>pip install pylight\n</code></pre>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Architecture Overview to understand how Pylight works</li> <li>Explore Building APIs for advanced features</li> <li>Check out Use Cases for real-world examples</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and solutions when using Pylight.</p>"},{"location":"troubleshooting/#common-issues","title":"Common Issues","text":""},{"location":"troubleshooting/#database-connection-errors","title":"Database Connection Errors","text":"<p>Problem: Cannot connect to database</p> <p>Solutions: - Verify database URL format - Check database credentials - Ensure database server is running - For PostgreSQL, ensure <code>asyncpg</code> is installed</p>"},{"location":"troubleshooting/#import-errors","title":"Import Errors","text":"<p>Problem: Import errors when using Pylight</p> <p>Solutions: - Verify Pylight is installed: <code>pip install pylight</code> - Check Python version (requires 3.11+) - Verify virtual environment is activated</p>"},{"location":"troubleshooting/#authentication-errors","title":"Authentication Errors","text":"<p>Problem: 401 Unauthorized errors</p> <p>Solutions: - Verify JWT token is valid - Check token expiration - Ensure Authorization header format: <code>Bearer TOKEN</code> - Verify secret key matches</p>"},{"location":"troubleshooting/#yaml-configuration-errors","title":"YAML Configuration Errors","text":"<p>Problem: YAML configuration validation errors</p> <p>Solutions: - Check YAML syntax - Verify required fields are present - Check field types match expected types - Review error messages for specific field paths</p>"},{"location":"troubleshooting/#table-not-found","title":"Table Not Found","text":"<p>Problem: Tables not found in database</p> <p>Solutions: - Verify table names match exactly (case-sensitive) - Ensure tables exist in database - Check database connection URL points to correct database</p>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<ul> <li>Check Documentation for detailed guides</li> <li>Review Examples for code samples</li> <li>Open an issue on GitHub</li> </ul>"},{"location":"troubleshooting/#next-steps","title":"Next Steps","text":"<ul> <li>Review Getting Started for setup</li> <li>Check Use Cases for examples</li> </ul>"},{"location":"use-cases/","title":"Use Cases","text":"<p>Complete end-to-end use case examples demonstrating how to combine multiple Pylight features to solve real-world problems.</p>"},{"location":"use-cases/#available-use-cases","title":"Available Use Cases","text":"<ul> <li>Simple CRUD API - Basic CRUD operations with a single model</li> <li>Authenticated API - API with JWT authentication and role-based access control</li> <li>Real-Time API - Real-time updates using WebSocket</li> <li>Database Migration - Generate models from existing database</li> <li>Multi-Tenant API - Multi-tenant API with tenant isolation</li> </ul>"},{"location":"use-cases/#quick-navigation","title":"Quick Navigation","text":"<p>Choose a use case that matches your needs:</p> <ul> <li>Getting Started: Start with Simple CRUD API</li> <li>Security: See Authenticated API</li> <li>Real-Time: Check Real-Time API</li> <li>Existing Database: Use Database Migration</li> <li>Multi-Tenancy: Explore Multi-Tenant API</li> </ul>"},{"location":"use-cases/#next-steps","title":"Next Steps","text":"<ul> <li>Start with Simple CRUD API for basic usage</li> <li>Explore Authenticated API for security</li> <li>Check out Real-Time API for real-time features</li> </ul>"},{"location":"use-cases/authenticated-api/","title":"Authenticated API","text":"<p>Complete example of creating an authenticated API with JWT authentication and role-based access control.</p>"},{"location":"use-cases/authenticated-api/#overview","title":"Overview","text":"<p>This use case demonstrates: - JWT authentication setup - Role-based access control - Protected endpoints - Token generation and validation</p>"},{"location":"use-cases/authenticated-api/#step-1-configure-authentication","title":"Step 1: Configure Authentication","text":"<pre><code>authentication:\n  jwt:\n    secret_key: \"your-secret-key\"\n\ntables:\n  - name: \"products\"\n    authentication:\n      required: true\n    permissions:\n      GET: []\n      POST: [\"admin\"]\n      PUT: [\"admin\"]\n      DELETE: [\"admin\"]\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/auth_config.yaml</code></p>"},{"location":"use-cases/authenticated-api/#step-2-start-application","title":"Step 2: Start Application","text":"<pre><code>from pylight.presentation.app import LightApi\n\napp = LightApi.fromYamlConfig(\"config.yaml\")\napp.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"use-cases/authenticated-api/#step-3-generate-jwt-token","title":"Step 3: Generate JWT Token","text":"<pre><code>import jwt\nimport datetime\n\nsecret_key = \"your-secret-key\"\npayload = {\n    \"username\": \"admin\",\n    \"role\": \"admin\",\n    \"sub\": \"admin\",\n    \"exp\": datetime.datetime.utcnow() + datetime.timedelta(hours=24)\n}\ntoken = jwt.encode(payload, secret_key, algorithm=\"HS256\")\nprint(f\"Bearer {token}\")\n</code></pre>"},{"location":"use-cases/authenticated-api/#testing","title":"Testing","text":""},{"location":"use-cases/authenticated-api/#authenticated-request","title":"Authenticated Request","text":"<pre><code>curl -H \"Authorization: Bearer YOUR_JWT_TOKEN\" \\\n     http://localhost:8000/api/products\n</code></pre>"},{"location":"use-cases/authenticated-api/#unauthenticated-request","title":"Unauthenticated Request","text":"<pre><code>curl http://localhost:8000/api/products\n# Returns 401 Unauthorized\n</code></pre>"},{"location":"use-cases/authenticated-api/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Authentication for details</li> <li>Explore Custom Authentication for customization</li> </ul>"},{"location":"use-cases/database-migration/","title":"Database Migration","text":"<p>Complete example of generating models from an existing database using database reflection.</p>"},{"location":"use-cases/database-migration/#overview","title":"Overview","text":"<p>This use case demonstrates: - Connecting to existing database - Reflecting table schemas - Generating models automatically - Using YAML configuration</p>"},{"location":"use-cases/database-migration/#step-1-create-yaml-configuration","title":"Step 1: Create YAML Configuration","text":"<pre><code>database:\n  url: \"postgresql://postgres:postgres@localhost:5432/pylight\"\n\ntables:\n  - name: \"products\"\n  - name: \"users\"\n  - name: \"orders\"\n</code></pre> <p>View source: <code>docs/examples/yaml_configs/basic_config.yaml</code></p>"},{"location":"use-cases/database-migration/#step-2-start-application","title":"Step 2: Start Application","text":"<pre><code>from pylight.presentation.app import LightApi\n\napp = LightApi.fromYamlConfig(\"config.yaml\")\napp.run(host=\"localhost\", port=8000)\n</code></pre> <p>Pylight will: 1. Connect to database 2. Reflect table schemas 3. Generate models dynamically 4. Register endpoints</p>"},{"location":"use-cases/database-migration/#step-3-verify-endpoints","title":"Step 3: Verify Endpoints","text":"<p>All endpoints are automatically available:</p> <ul> <li><code>GET /api/products</code></li> <li><code>GET /api/users</code></li> <li><code>GET /api/orders</code></li> </ul>"},{"location":"use-cases/database-migration/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Database Reflection for details</li> <li>Explore YAML Configuration for configuration</li> </ul>"},{"location":"use-cases/multi-tenant-api/","title":"Multi-Tenant API","text":"<p>Complete example of creating a multi-tenant API with tenant isolation.</p>"},{"location":"use-cases/multi-tenant-api/#overview","title":"Overview","text":"<p>This use case demonstrates: - Tenant identification - Tenant-based data filtering - Custom middleware for tenant handling</p>"},{"location":"use-cases/multi-tenant-api/#step-1-define-model-with-tenant","title":"Step 1: Define Model with Tenant","text":"<pre><code>from pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    tenant_id = Column(String(100))  # Tenant identifier\n    name = Column(String(100))\n    price = Column(Integer)\n</code></pre>"},{"location":"use-cases/multi-tenant-api/#step-2-create-tenant-middleware","title":"Step 2: Create Tenant Middleware","text":"<pre><code>from starlette.middleware.base import BaseHTTPMiddleware\nfrom starlette.requests import Request\n\nclass TenantMiddleware(BaseHTTPMiddleware):\n    async def dispatch(self, request: Request, call_next):\n        # Extract tenant from header\n        tenant_id = request.headers.get(\"X-Tenant-ID\")\n        request.state.tenant_id = tenant_id\n        return await call_next(request)\n</code></pre>"},{"location":"use-cases/multi-tenant-api/#step-3-filter-by-tenant","title":"Step 3: Filter by Tenant","text":"<p>Customize REST handlers to filter by tenant:</p> <pre><code># In custom REST handler\nasync def get_handler(request):\n    tenant_id = request.state.tenant_id\n    # Filter products by tenant_id\n    products = await session.query(Product).filter(\n        Product.tenant_id == tenant_id\n    ).all()\n    return products\n</code></pre>"},{"location":"use-cases/multi-tenant-api/#testing","title":"Testing","text":""},{"location":"use-cases/multi-tenant-api/#request-with-tenant","title":"Request with Tenant","text":"<pre><code>curl -H \"X-Tenant-ID: tenant1\" \\\n     http://localhost:8000/api/products\n</code></pre> <p>Only returns products for tenant1.</p>"},{"location":"use-cases/multi-tenant-api/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Middleware for details</li> <li>Explore Customization for advanced patterns</li> </ul>"},{"location":"use-cases/real-time-api/","title":"Real-Time API","text":"<p>Complete example of creating a real-time API with WebSocket support.</p>"},{"location":"use-cases/real-time-api/#overview","title":"Overview","text":"<p>This use case demonstrates: - WebSocket endpoint creation - Real-time subscriptions - Live updates on data changes</p>"},{"location":"use-cases/real-time-api/#step-1-define-model","title":"Step 1: Define Model","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n</code></pre>"},{"location":"use-cases/real-time-api/#step-2-create-application","title":"Step 2: Create Application","text":"<pre><code>app = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\napp.run(host=\"localhost\", port=8000)\n</code></pre> <p>WebSocket endpoint is automatically created at <code>/ws/products</code>.</p>"},{"location":"use-cases/real-time-api/#step-3-connect-websocket","title":"Step 3: Connect WebSocket","text":"<pre><code>import asyncio\nimport websockets\nimport json\n\nasync def connect():\n    uri = \"ws://localhost:8000/ws/products\"\n    async with websockets.connect(uri) as websocket:\n        # Subscribe\n        await websocket.send(json.dumps({\n            \"action\": \"subscribe\",\n            \"resource\": \"products\"\n        }))\n\n        # Listen for updates\n        while True:\n            message = await websocket.recv()\n            data = json.loads(message)\n            print(f\"Event: {data['event']}, Data: {data['data']}\")\n\nasyncio.run(connect())\n</code></pre> <p>View source: <code>docs/examples/websocket_hooks.py</code></p>"},{"location":"use-cases/real-time-api/#testing","title":"Testing","text":""},{"location":"use-cases/real-time-api/#create-product-triggers-websocket-update","title":"Create Product (triggers WebSocket update)","text":"<pre><code>curl -X POST http://localhost:8000/api/products \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Laptop\", \"price\": 999}'\n</code></pre> <p>WebSocket clients receive update notification.</p>"},{"location":"use-cases/real-time-api/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about WebSocket for details</li> <li>Explore GraphQL for flexible queries</li> </ul>"},{"location":"use-cases/simple-crud-api/","title":"Simple CRUD API","text":"<p>Complete example of creating a simple CRUD API with Pylight.</p>"},{"location":"use-cases/simple-crud-api/#overview","title":"Overview","text":"<p>This use case demonstrates: - Creating a model - Registering with LightApi - All CRUD operations (Create, Read, Update, Delete) - Automatic endpoint generation</p>"},{"location":"use-cases/simple-crud-api/#step-1-define-model","title":"Step 1: Define Model","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n    description = Column(String(500))\n</code></pre> <p>View source: <code>docs/examples/basic_usage.py</code></p>"},{"location":"use-cases/simple-crud-api/#step-2-create-application","title":"Step 2: Create Application","text":"<pre><code>app = LightApi(databaseUrl=\"sqlite:///app.db\")\napp.register(Product)\n</code></pre>"},{"location":"use-cases/simple-crud-api/#step-3-run-server","title":"Step 3: Run Server","text":"<pre><code>app.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"use-cases/simple-crud-api/#complete-example","title":"Complete Example","text":"<pre><code>from pylight.presentation.app import LightApi\nfrom pylight.domain.entities.rest_endpoint import RestEndpoint\nfrom sqlalchemy import Column, Integer, String\n\nclass Product(RestEndpoint):\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n    price = Column(Integer)\n    description = Column(String(500))\n\nif __name__ == \"__main__\":\n    app = LightApi(databaseUrl=\"sqlite:///app.db\")\n    app.register(Product)\n    app.run(host=\"localhost\", port=8000)\n</code></pre>"},{"location":"use-cases/simple-crud-api/#available-endpoints","title":"Available Endpoints","text":"<ul> <li><code>GET /api/products</code> - List all products</li> <li><code>GET /api/products/{id}</code> - Get a product</li> <li><code>POST /api/products</code> - Create a product</li> <li><code>PUT /api/products/{id}</code> - Update a product</li> <li><code>DELETE /api/products/{id}</code> - Delete a product</li> </ul>"},{"location":"use-cases/simple-crud-api/#testing","title":"Testing","text":""},{"location":"use-cases/simple-crud-api/#create-product","title":"Create Product","text":"<pre><code>curl -X POST http://localhost:8000/api/products \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Laptop\", \"price\": 999, \"description\": \"High-performance laptop\"}'\n</code></pre>"},{"location":"use-cases/simple-crud-api/#list-products","title":"List Products","text":"<pre><code>curl http://localhost:8000/api/products\n</code></pre>"},{"location":"use-cases/simple-crud-api/#get-product","title":"Get Product","text":"<pre><code>curl http://localhost:8000/api/products/1\n</code></pre>"},{"location":"use-cases/simple-crud-api/#update-product","title":"Update Product","text":"<pre><code>curl -X PUT http://localhost:8000/api/products/1 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Updated Laptop\", \"price\": 1099}'\n</code></pre>"},{"location":"use-cases/simple-crud-api/#delete-product","title":"Delete Product","text":"<pre><code>curl -X DELETE http://localhost:8000/api/products/1\n</code></pre>"},{"location":"use-cases/simple-crud-api/#next-steps","title":"Next Steps","text":"<ul> <li>Add Authentication to secure the API</li> <li>Enable Caching for better performance</li> <li>Explore GraphQL for flexible queries</li> </ul>"}]}